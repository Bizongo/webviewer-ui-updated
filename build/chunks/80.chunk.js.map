{"version":3,"sources":["webpack:///./src/components/LinkModal/LinkModal.js","webpack:///./src/components/LinkModal/index.js"],"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","_slicedToArray","arr","Array","isArray","_arrayWithHoles","l","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","toString","from","test","len","arr2","LinkModal","_ref","rightClickedAnnotation","setRightClickedAnnotation","_useSelector2","useSelector","state","selectors","isElementDisabled","DataElements","LINK_MODAL","isElementOpen","getTotalPages","getCurrentPage","getSelectedTab","getPageLabels","isRightClickAnnotationPopupEnabled","getActiveDocumentViewerKey","isDisabled","isOpen","totalPages","currentPage","tabSelected","pageLabels","activeDocumentViewerKey","useTranslation","dispatch","useDispatch","urlInput","React","createRef","pageLabelInput","_useState2","useState","url","setURL","_useState4","pageLabel","setPageLabel","isRightClickedAnnotationSelected","core","isAnnotationSelected","selectedAnnotations","getSelectedAnnotations","annotManager","getAnnotationManager","closeModal","actions","closeElement","setToolMode","defaultTool","newLink","x","width","height","linkPageNumber","arguments","undefined","link","window","Core","Annotations","Link","PageNumber","StrokeColor","Color","StrokeStyle","StrokeThickness","Author","getCurrentUser","Subject","X","Y","Width","Height","createLink","action","linksResults","quads","getSelectedTextQuads","selectedText","getSelectedText","_loop","currPageNumber","currPageLinks","quad","Math","min","x1","x3","y1","y3","abs","parseInt","createHighlightAnnot","apply","annot","groupedAnnots","getGroupAnnotations","linksToDelete","filter","deleteAnnotations","addAction","addAnnotations","groupAnnotations","fn","_ref2","_callee","linkAnnotArray","text","linkAnnot","highlight","_context","TextHighlightAnnotation","Opacity","Quads","setContents","index","self","args","err","_x","_x2","_x3","_x4","addURLLink","preventDefault","urlWithProtocol","isValidURI","concat","Actions","URI","uri","pageNumbersToDraw","map","_toConsumableArray","Set","pageNumberToDraw","drawAnnotations","addPageLink","options","dest","Dest","GoTo","page","indexOf","useEffect","urls","match","current","focus","addEventListener","removeEventListener","modalClass","classNames","Modal","open","closed","createElement","Swipeable","onSwipedUp","onSwipedDown","preventDefaultTouchmoveEvent","className","data-element","onMouseDown","stopPropagation","Tabs","id","Tab","dataElement","TabPanel","onSubmit","ref","onChange","target","Button","label","onClick","disabled","includes"],"mappings":"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","file":"chunks/80.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport defaultTool from 'constants/defaultTool';\nimport core from 'core';\nimport { Tabs, Tab, TabPanel } from 'components/Tabs';\nimport Button from 'components/Button';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { Swipeable } from 'react-swipeable';\nimport DataElements from 'constants/dataElement';\n\nimport './LinkModal.scss';\n\nconst LinkModal = ({ rightClickedAnnotation, setRightClickedAnnotation }) => {\n  const [\n    isDisabled,\n    isOpen,\n    totalPages,\n    currentPage,\n    tabSelected,\n    pageLabels,\n    isRightClickAnnotationPopupEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.isElementDisabled(state, DataElements.LINK_MODAL),\n    selectors.isElementOpen(state, DataElements.LINK_MODAL),\n    selectors.getTotalPages(state),\n    selectors.getCurrentPage(state),\n    selectors.getSelectedTab(state, DataElements.LINK_MODAL),\n    selectors.getPageLabels(state),\n    selectors.isRightClickAnnotationPopupEnabled(state),\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n\n  const urlInput = React.createRef();\n  const pageLabelInput = React.createRef();\n\n  const [url, setURL] = useState('');\n  const [pageLabel, setPageLabel] = useState('');\n  const isRightClickedAnnotationSelected = core.isAnnotationSelected(rightClickedAnnotation, activeDocumentViewerKey);\n  const selectedAnnotations = core.getSelectedAnnotations(activeDocumentViewerKey);\n  const annotManager = core.getAnnotationManager(activeDocumentViewerKey);\n\n  const closeModal = () => {\n    dispatch(actions.closeElement(DataElements.LINK_MODAL));\n    setURL('');\n    core.setToolMode(defaultTool);\n    setRightClickedAnnotation(null);\n  };\n\n  const newLink = (x, y, width, height, linkPageNumber = currentPage) => {\n    const link = new window.Core.Annotations.Link();\n    link.PageNumber = linkPageNumber;\n    link.StrokeColor = new window.Core.Annotations.Color(0, 165, 228);\n    link.StrokeStyle = 'underline';\n    link.StrokeThickness = 2;\n    link.Author = core.getCurrentUser();\n    link.Subject = 'Link';\n    link.X = x;\n    link.Y = y;\n    link.Width = width;\n    link.Height = height;\n    return link;\n  };\n\n  const createLink = (action) => {\n    const linksResults = [];\n\n    const quads = core.getSelectedTextQuads(activeDocumentViewerKey);\n\n    // If annotation popup is on right click, this won't clear selected text if there's any, adding links will add links for both right-clicked annotation and selected text\n    if (quads) {\n      const selectedText = core.getSelectedText(activeDocumentViewerKey);\n      for (const currPageNumber in quads) {\n        const currPageLinks = [];\n        quads[currPageNumber].forEach((quad) => {\n          currPageLinks.push(\n            newLink(\n              Math.min(quad.x1, quad.x3),\n              Math.min(quad.y1, quad.y3),\n              Math.abs(quad.x1 - quad.x3),\n              Math.abs(quad.y1 - quad.y3),\n              parseInt(currPageNumber)\n            )\n          );\n        });\n        createHighlightAnnot(\n          currPageLinks,\n          quads[currPageNumber],\n          selectedText,\n          action\n        );\n        linksResults.push(...currPageLinks);\n      }\n    }\n\n    const annotationsToAddLink = (!isRightClickAnnotationPopupEnabled || isRightClickedAnnotationSelected) ? selectedAnnotations : [rightClickedAnnotation];\n\n    annotationsToAddLink.forEach((annot) => {\n      if (!annot) {\n        return;\n      }\n      const groupedAnnots = annotManager.getGroupAnnotations(annot);\n      if (groupedAnnots.length > 1) {\n        const linksToDelete = groupedAnnots.filter((annot) => annot instanceof window.Core.Annotations.Link);\n        if (linksToDelete.length > 0) {\n          core.deleteAnnotations(linksToDelete, activeDocumentViewerKey);\n        }\n      }\n\n      // if multi-select an annotation with no link option with an annotation with link option and right click on the latter, link button will show up and will add links for all annotations\n      const link = newLink(annot.X, annot.Y, annot.Width, annot.Height);\n      link.addAction('U', action);\n      core.addAnnotations([link], activeDocumentViewerKey);\n      linksResults.push(link);\n      annotManager.groupAnnotations(annot, [link]);\n    });\n\n    return linksResults;\n  };\n\n  const createHighlightAnnot = async (linkAnnotArray, quads, text, action) => {\n    const linkAnnot = linkAnnotArray[0];\n    const highlight = new window.Core.Annotations.TextHighlightAnnotation();\n    highlight.PageNumber = linkAnnot.PageNumber;\n    highlight.X = linkAnnot.X;\n    highlight.Y = linkAnnot.Y;\n    highlight.Width = linkAnnot.Width;\n    highlight.Height = linkAnnot.Height;\n    highlight.StrokeColor = new window.Core.Annotations.Color(0, 0, 0, 0);\n    highlight.Opacity = 0;\n    highlight.Quads = quads;\n    highlight.Author = core.getCurrentUser(activeDocumentViewerKey);\n    highlight.setContents(text);\n\n    linkAnnotArray.forEach((link, index) => {\n      link.addAction('U', action);\n      index === 0 ? core.addAnnotations([link, highlight], activeDocumentViewerKey) : core.addAnnotations([link], activeDocumentViewerKey);\n    });\n    annotManager.groupAnnotations(highlight, linkAnnotArray, activeDocumentViewerKey);\n  };\n\n  const addURLLink = (e) => {\n    e.preventDefault();\n\n    if (!url.length) {\n      return;\n    }\n\n    let urlWithProtocol;\n    if (!core.isValidURI(url)) {\n      urlWithProtocol = `https://${url}`;\n    } else {\n      urlWithProtocol = url;\n    }\n\n    const action = new window.Core.Actions.URI({ uri: urlWithProtocol });\n    const links = createLink(action);\n\n    let pageNumbersToDraw = links.map((link) => link.PageNumber);\n    pageNumbersToDraw = [...new Set(pageNumbersToDraw)];\n    pageNumbersToDraw.forEach((pageNumberToDraw) => {\n      core.drawAnnotations(pageNumberToDraw, null, true, undefined, activeDocumentViewerKey);\n    });\n\n    closeModal();\n  };\n\n  const isValidPageLabel = () => {\n    return pageLabels?.includes(pageLabel);\n  };\n\n  const addPageLink = (e) => {\n    e.preventDefault();\n\n    const Dest = window.Core.Actions.GoTo.Dest;\n\n    const options = { dest: new Dest({ page: pageLabels.indexOf(pageLabel) + 1 }) };\n    const action = new window.Core.Actions.GoTo(options);\n\n    const links = createLink(action);\n\n    let pageNumbersToDraw = links.map((link) => link.PageNumber);\n    pageNumbersToDraw = [...new Set(pageNumbersToDraw)];\n    pageNumbersToDraw.forEach((pageNumberToDraw) => {\n      core.drawAnnotations(pageNumberToDraw, null, true, undefined, activeDocumentViewerKey);\n    });\n\n    closeModal();\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      //  prepopulate URL if URL is selected\n      const selectedText = core.getSelectedText(activeDocumentViewerKey);\n      if (selectedText) {\n        const urlRegex = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/g;\n        const urls = selectedText.match(urlRegex);\n        if (urls && urls.length > 0) {\n          setURL(urls[0]);\n        }\n      }\n\n      setPageLabel(pageLabels.length > 0 ? pageLabels[0] : '1');\n    }\n  }, [totalPages, isOpen]);\n\n  useEffect(() => {\n    if (tabSelected === 'PageNumberPanelButton' && isOpen) {\n      pageLabelInput.current.focus();\n    } else if (tabSelected === 'URLPanelButton' && isOpen) {\n      urlInput.current.focus();\n    }\n  }, [tabSelected, isOpen, pageLabelInput, urlInput]);\n\n  useEffect(() => {\n    core.addEventListener('documentUnloaded', closeModal);\n    return () => {\n      core.removeEventListener('documentUnloaded', closeModal);\n    };\n  }, []);\n\n  const modalClass = classNames({\n    Modal: true,\n    LinkModal: true,\n    open: isOpen,\n    closed: !isOpen,\n  });\n\n  return isDisabled ? null : (\n    <Swipeable\n      onSwipedUp={closeModal}\n      onSwipedDown={closeModal}\n      preventDefaultTouchmoveEvent\n    >\n      <div\n        className={modalClass}\n        data-element={DataElements.LINK_MODAL}\n        onMouseDown={closeModal}\n      >\n        <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\n          <div className=\"swipe-indicator\" />\n          <Tabs id=\"linkModal\">\n            <div className=\"tab-list\">\n              <Tab dataElement=\"URLPanelButton\">\n                <div className=\"tab-options-button\">{t('link.url')}</div>\n              </Tab>\n              <div className=\"tab-options-divider\" />\n              <Tab dataElement=\"PageNumberPanelButton\">\n                <div className=\"tab-options-button\">{t('link.page')}</div>\n              </Tab>\n            </div>\n\n            <TabPanel dataElement=\"URLPanel\">\n              <form onSubmit={addURLLink}>\n                <div>{t('link.enterurl')}</div>\n                <div className=\"linkInput\">\n                  <input\n                    className=\"urlInput\"\n                    ref={urlInput}\n                    value={url}\n                    onChange={(e) => setURL(e.target.value)}\n                  />\n                  <Button\n                    dataElement=\"linkSubmitButton\"\n                    label={t('action.link')}\n                    onClick={addURLLink}\n                    disabled={!url.length}\n                  />\n                </div>\n              </form>\n            </TabPanel>\n            <TabPanel dataElement=\"PageNumberPanel\">\n              <form onSubmit={addPageLink}>\n                <div>{t('link.enterpage')}</div>\n                <div className=\"linkInput\">\n                  <input\n                    ref={pageLabelInput}\n                    value={pageLabel}\n                    onChange={(e) => setPageLabel(e.target.value)}\n                  />\n                  <Button\n                    dataElement=\"linkSubmitButton\"\n                    label={t('action.link')}\n                    onClick={addPageLink}\n                    disabled={!isValidPageLabel()}\n                  />\n                </div>\n              </form>\n            </TabPanel>\n          </Tabs>\n        </div>\n      </div>\n    </Swipeable>\n  );\n};\n\nexport default LinkModal;\n","import LinkModal from './LinkModal';\n\nexport default LinkModal;"],"sourceRoot":""}