{"version":3,"sources":["webpack:///./src/helpers/applyRedactions.js","webpack:///./src/components/AnnotationStylePopup/AnnotationStylePopup.scss?b726","webpack:///./src/components/AnnotationStylePopup/AnnotationStylePopup.scss","webpack:///./src/components/AnnotationStylePopup/AnnotationStylePopup.js","webpack:///./src/components/AnnotationStylePopup/index.js","webpack:///./src/components/AnnotationPopup/AnnotationPopup.scss?49c2","webpack:///./src/components/CalibrationPopup/CalibrationPopup.scss?38fc","webpack:///./src/components/CalibrationPopup/CalibrationPopup.scss","webpack:///./src/components/AnnotationPopup/AnnotationPopup.scss","webpack:///./src/components/DatePicker/DatePicker.js","webpack:///./src/components/DatePicker/index.js","webpack:///./src/components/CalibrationPopup/CalibrationPopup.js","webpack:///./src/components/CalibrationPopup/index.js","webpack:///./src/components/AnnotationPopup/AnnotationPopup.js","webpack:///./src/components/AnnotationPopup/AnnotationPopupContainer.js","webpack:///./src/components/AnnotationPopup/index.js"],"names":["noop","annotations","onRedactionCompleted","arguments","length","undefined","activeDocumentViewerKey","dispatch","core","isWebViewerServerDocument","webViewerServerApply","webViewerApply","applyRedactions","then","results","url","downloadPdf","filename","includeAnnotations","externalURL","console","warn","warning","message","i18next","t","title","confirmBtnText","onConfirm","err","fireError","Promise","resolve","actions","showWarningMessage","api","content","__esModule","default","module","i","options","styleTag","window","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","push","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode","exports","locals","___CSS_LOADER_API_IMPORT___","propTypes","PropTypes","array","isRequired","style","object","properties","isRedaction","bool","isFreeText","isEllipse","hasBackToMenu","onBackToMenu","func","AnnotationStylePopup","props","isMeasure","colorMapKey","showLineStyleOptions","hideSnapModeCheckbox","onResize","_useSelector2","_slicedToArray","useSelector","state","selectors","isElementDisabled","DataElements","ANNOTATION_STYLE_POPUP","isToolDefaultStyleUpdateFromAnnotationPopupEnabled","getActiveDocumentViewerKey","isDisabled","useDispatch","useTranslation","_useState2","useState","isAutoSizeFont","setAutoSizeFont","handleSliderChange","property","value","annotationManager","getAnnotationManager","annotation","adjustFreeTextBoundingBox","redrawAnnotation","handlePropertyChange","setAnnotationStyles","_defineProperty","setToolStyles","ToolName","handleStyleChange","handleRichTextStyleChange","updateAnnotationRichTextStyle","handleLineStyleChange","section","lineStyle","setStartStyle","setEndStyle","dashes","split","shift","trigger","handleClick","e","isMobile","target","currentTarget","closeElement","ANNOTATION_POPUP","className","getClassName","React","createElement","Measure","_ref","measureRef","data-element","onClick","ref","ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER","ActionButton","dataElement","ANNOTATION_STYLE_POPUP_BACK_BUTTON","label","img","StylePopup","isFreeTextAutoSize","onFreeTextSizeToggle","handleFreeTextAutoSizeToggle","onStyleChange","onSliderChange","onPropertyChange","disableSeparator","onRichTextStyleChange","onLineStyleChange","_regeneratorRuntime","r","Object","prototype","n","hasOwnProperty","o","defineProperty","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","__await","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","DatePicker","onDatePickerShow","dateRef","useRef","dateContainerRef","useEffect","datePicker","fn","_ref2","_callee","_context","Core","createDatePicker","field","current","container","format","getDateFormat","self","args","apply","getDatePicker","destroy","Scale","parseMeasurementContentsByAnnotation","factor","axis","getLineLength","CalibrationPropType","shape","arrayOf","CalibrationPopup","_Scale$worldScale","_Scale$worldScale2","getMeasurementUnits","getCalibrationInfo","shallowEqual","measurementUnits","_useSelector2$","tempScale","isFractionalUnit","defaultUnit","valueDisplay","setValueDisplay","inputRef","unitTo","worldScale","unit","unitToOptions","to","filter","fractionalUnits","includes","isFractionalUnitsToggleDisabled","valueInputType","inputValueClass","classNames","updateTempScale","scaleValue","scaleUnit","pageUnit","currentDistance","currentScale","newRatio","pageScale","defaultPageUnit","metricUnits","defaultPageValue","convertUnit","updateCalibrationInfo","concat","setValue","_Scale$worldScale3","updateValueDisplay","_Scale$worldScale5","newValueDisplay","getFormattedValue","tempScaleRef","onAnnotationChanged","action","_Scale$worldScale6","currentUnit","addEventListener","removeEventListener","deleteAnnotations","activeElement","min","onChange","inputValue","trim","inFractionalRegex","test","result","parseInFractional","ftInFractionalRegex","parseFtInFractional","ftInDecimalRegex","parseFtInDecimal","floatRegex","parseFloat","onBlur","placeholder","hintValues","Tooltip","Dropdown","items","currentSelectionKey","onClickItem","_Scale$worldScale4","Choice","isSwitch","leftLabel","disabled","checked","id","isIE","isOpen","isRightClickMenu","isNotesPanelOpenOrActive","isRichTextPopupOpen","isLinkModalOpen","isWarningModalOpen","isContextMenuPopupOpen","focusedAnnotation","popupRef","any","position","showViewFileButton","onViewFile","showCommentButton","onCommentAnnotation","isDateFreeTextCanEdit","isDatePickerOpen","handleDateChange","isCalibrationPopupOpen","showEditStyleButton","isStylePopupOpen","openEditStylePopup","closeEditStylePopup","annotationStyle","showContentEditButton","onEditContent","openContentEditDeleteWarningModal","isAppearanceSignature","onClearAppearanceSignature","showRedactionButton","onApplyRedaction","showGroupButton","onGroupAnnotations","showUngroupButton","onUngroupAnnotations","showFormFieldButton","onOpenFormField","showDeleteButton","onDeleteAnnotation","showLinkButton","hasAssociatedLink","linkAnnotationToURL","showFileDownloadButton","downloadFileAttachment","showAudioPlayButton","handlePlaySound","showCalibrateButton","onOpenCalibration","customizableUI","openStylePanel","isInReadOnlyMode","AnnotationPopup","_document$activeEleme","_focusedAnnotation$is","shortCutKeysFor3DVisible","setShortCutKeysFor3DVisible","commentButtonLabel","commentButtonImg","show3DShortCutButton","Annotations","Model3DAnnotation","isRectangle","RectangleAnnotation","EllipseAnnotation","isPolygon","PolygonAnnotation","FreeTextAnnotation","getIntent","Intent","FreeText","FreeTextCallout","RedactionAnnotation","mapAnnotationToKey","getDataWithKey","mapToolNameToKey","hasLineEndings","isInstanceActive","getRootNode","StrokeStyle","isContentEdit","isContentEditPlaceholder","isReadOnlySignature","SignatureWidgetAnnotation","fieldFlags","get","WidgetFlags","READ_ONLY","StartLineStyle","getStartStyle","EndLineStyle","getEndStyle","_richTextStyles$","_ref3","_richTextStyles$2","_richTextStyles$3","_richTextStyles$3$tex","_richTextStyles$4","_richTextStyles$4$tex","_richTextStyles$0$tex","_richTextStyles$5","_richTextStyles$5$tex","richTextStyles","getRichTextStyle","calculatedFontSize","getCalculatedFontSize","Font","FontSize","TextAlign","TextVerticalAlign","bold","italic","underline","strikeout","OverlayText","annotationPopup","Popup","open","closed","stylePopupOpen","_objectSpread","FocusTrap","locked","CustomizablePopup","childrenClassName","isNotClickableSelector","CALIBRATION_POPUP_BUTTON","renderPopup","Draggable","cancel","_asyncToGenerator","arr","Array","isArray","_arrayWithHoles","l","_iterableToArrayLimit","minLen","_arrayLikeToArray","toString","from","_unsupportedIterableToArray","_nonIterableRest","len","arr2","ToolNames","Tools","selectedMultipleAnnotations","canModify","focusedAnnotationStyle","setIsStylePopupOpen","setDatePickerOpen","isDatePickerMount","setDatePickerMount","includesFormFieldAnnotation","stylePopupRepositionFlag","setStylePopupRepositionFlag","closePopup","AnnotationPopupContainer","isElementOpen","CONTEXT_MENU_POPUP","isRightClickAnnotationPopupEnabled","NOTES_PANEL","INLINE_COMMENT_POPUP","LINK_MODAL","WARNING_MODAL","getIsMultiTab","getTabManager","getTabs","getNotesInLeftPanel","LEFT_PANEL","getActiveLeftPanel","isAnyCustomPanelOpen","getFeatureFlags","STYLE_PANEL","isNotesPanelDisabled","isAnnotationStylePopupDisabled","isInlineCommentingDisabled","isNotesPanelOpen","isMultiTab","tabManager","tabs","notesInLeftPanel","leftPanelOpen","activeLeftPanel","featureFlags","isStylePanelOpen","isStylePanelDisabled","left","top","setPosition","_useState4","setCalibrationPopupOpen","isFocusedAnnotationSelected","isAnnotationSelected","annotManager","useOnClickOutside","useCallback","_getRootNode$querySel","notesPanel","querySelector","clickedInNotesPanel","contains","clickedInLinkModal","warningModal","getOpenedWarningModal","colorPicker","getOpenedColorPicker","setPopupPosition","getAnnotationPopupPositionBasedOn","handleResize","throttle","useLayoutEffect","CALIBRATION_MEASUREMENT","acceptFormats","getHashParameters","SupportedFileFormats","SERVER","CLIENT","FileAttachmentAnnotation","mimeTypeToExtension","getFileMetadata","mimeType","metaData","fileAttachmentTab","find","tab","setActiveTab","t0","getFileData","t1","t2","extension","saveCurrentActiveTabState","setActive","addTab","selectedAnnotations","getSelectedAnnotations","numberOfSelectedAnnotations","multipleAnnotationsSelected","canModifyContents","numberOfGroups","getNumberOfGroups","canGroup","canUngroup","isSignedByAppearance","getIsReadOnly","CROP","isUncommittedContentEditPlaceholder","hasStyle","toolsWithNoStyling","RADIO_FORM_FIELD","CHECK_BOX_FIELD","VIDEO_REDACTION","VIDEO_AND_AUDIO_REDACTION","AUDIO_REDACTION","isFullPDFEnabled","getContentEditType","ContentEdit","Types","TEXT","_callee2","_context2","isAnnotationRedactable","primaryAnnotation","selectedAnnotation","InReplyTo","isInFormFieldCreationMode","getFormFieldCreationManager","SIGNATURE","REDACTION","REDACTION2","REDACTION3","REDACTION4","STICKY","STICKY2","STICKY3","STICKY4","SoundAnnotation","LineAnnotation","hasAudioData","contentEditManager","getContentEditManager","isInContentEditMode","endContentEditMode","triggerNoteEditing","openElement","text","setNoteContents","updateAnnotation","isDatePickerShowed","clearSignature","groupAnnotations","ungroupAnnotations","disableElement","PRIORITY_THREE","FORM_FIELD_EDIT_POPUP","annot","getGroupedLinkAnnotations","linkAnnot","index","TextHighlightAnnotation","Opacity","deleteAnnotation","setActiveSoundAnnotation","triggerResetAudioPlaybackPosition","CALIBRATION_MODAL"],"mappings":"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","file":"chunks/40.chunk.js","sourcesContent":["import core from 'core';\nimport i18next from 'i18next';\n\nimport actions from 'actions';\nimport { fireError } from 'helpers/fireEvent';\nimport downloadPdf from 'helpers/downloadPdf';\n\nfunction noop() { }\n\nexport default (annotations, onRedactionCompleted = noop, activeDocumentViewerKey = 1) => (dispatch) => {\n  if (core.isWebViewerServerDocument()) {\n    // when are using Webviewer Server, it'll download the redacted document\n    return webViewerServerApply(annotations, dispatch, activeDocumentViewerKey);\n  }\n  return webViewerApply(annotations, onRedactionCompleted, dispatch, activeDocumentViewerKey);\n};\n\nconst webViewerServerApply = (annotations, dispatch, activeDocumentViewerKey) => core.applyRedactions(annotations, activeDocumentViewerKey).then((results) => {\n  if (results && results.url) {\n    return downloadPdf(dispatch, {\n      filename: 'redacted.pdf',\n      includeAnnotations: true,\n      externalURL: results.url,\n    });\n  }\n  console.warn('WebViewer Server did not return a valid result');\n});\n\nconst webViewerApply = (annotations, onRedactionCompleted, dispatch, activeDocumentViewerKey) => {\n  const message = i18next.t('warning.redaction.applyMessage');\n  const title = i18next.t('warning.redaction.applyTile');\n  const confirmBtnText = i18next.t('action.apply');\n\n  const warning = {\n    message,\n    title,\n    confirmBtnText,\n    onConfirm: () => {\n      core.applyRedactions(annotations, activeDocumentViewerKey)\n        .then(() => {\n          onRedactionCompleted();\n        })\n        .catch((err) => fireError(err));\n      return Promise.resolve();\n    },\n  };\n\n  return dispatch(actions.showWarningMessage(warning));\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!./AnnotationStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}.AnnotationStylePopup .back-to-menu-container{margin-top:var(--padding-medium);margin-right:var(--padding-medium);margin-left:var(--padding-medium);padding-bottom:var(--padding-small);border-bottom:1px solid var(--border)}.AnnotationStylePopup .Button.back-to-menu-button{margin:0;width:100%;height:32px;border-radius:0;justify-content:flex-start}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Measure from 'react-measure';\nimport { useTranslation } from 'react-i18next';\nimport StylePopup from 'components/StylePopup';\nimport ActionButton from 'components/ActionButton';\nimport core from 'core';\nimport getClassName from 'helpers/getClassName';\nimport setToolStyles from 'helpers/setToolStyles';\nimport { isMobile } from 'helpers/device';\nimport adjustFreeTextBoundingBox from 'helpers/adjustFreeTextBoundingBox';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport handleFreeTextAutoSizeToggle from 'src/helpers/handleFreeTextAutoSizeToggle';\n\nimport './AnnotationStylePopup.scss';\n\nconst propTypes = {\n  annotations: PropTypes.array.isRequired,\n  style: PropTypes.object.isRequired,\n  properties: PropTypes.object.isRequired,\n  isRedaction: PropTypes.bool,\n  isFreeText: PropTypes.bool,\n  isEllipse: PropTypes.bool,\n  hasBackToMenu: PropTypes.bool,\n  onBackToMenu: PropTypes.func,\n};\n\nconst AnnotationStylePopup = (props) => {\n  const {\n    annotations,\n    style,\n    isRedaction,\n    isFreeText,\n    isEllipse,\n    isMeasure,\n    colorMapKey,\n    showLineStyleOptions,\n    properties,\n    hideSnapModeCheckbox,\n    onResize,\n    hasBackToMenu,\n    onBackToMenu\n  } = props;\n\n  const [\n    isDisabled,\n    isToolDefaultStyleUpdateFromAnnotationPopupEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.isElementDisabled(state, DataElements.ANNOTATION_STYLE_POPUP),\n    selectors.isToolDefaultStyleUpdateFromAnnotationPopupEnabled(state),\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const [isAutoSizeFont, setAutoSizeFont] = useState(properties.isAutoSizeFont);\n\n  const handleSliderChange = (property, value) => {\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n    annotations.forEach((annotation) => {\n      annotation[property] = value;\n      if (property === 'StrokeThickness') {\n        adjustFreeTextBoundingBox(annotation);\n      }\n      annotationManager.redrawAnnotation(annotation);\n    });\n  };\n\n  const handlePropertyChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      }, activeDocumentViewerKey);\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n      if (property === 'FontSize' || property === 'Font') {\n        adjustFreeTextBoundingBox(annotation);\n      }\n    });\n  };\n\n  const handleStyleChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      }, activeDocumentViewerKey);\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n    });\n  };\n\n  const handleRichTextStyleChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.updateAnnotationRichTextStyle(annotation, { [property]: value }, activeDocumentViewerKey);\n    });\n  };\n\n  const handleLineStyleChange = (section, value) => {\n    annotations.forEach((annotation) => {\n      let lineStyle = '';\n      if (section === 'start') {\n        annotation.setStartStyle(value);\n        lineStyle = 'StartLineStyle';\n      } else if (section === 'end') {\n        annotation.setEndStyle(value);\n        lineStyle = 'EndLineStyle';\n      } else if (section === 'middle') {\n        const dashes = value.split(',');\n        const style = dashes.shift();\n        annotation['Style'] = style;\n        annotation['Dashes'] = dashes;\n        lineStyle = 'StrokeStyle';\n      }\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, lineStyle, value);\n      }\n\n      core.getAnnotationManager(activeDocumentViewerKey).redrawAnnotation(annotation);\n    });\n\n    core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [annotations, 'modify', {}]);\n  };\n\n  const handleClick = (e) => {\n    if (isMobile() && e.target === e.currentTarget) {\n      dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n    }\n  };\n\n  const handleResize = () => {\n    onResize && onResize();\n  };\n\n  const className = getClassName('Popup AnnotationStylePopup', props);\n\n  return isDisabled ? null : (\n    <Measure\n      onResize={handleResize}\n    >\n      {({ measureRef }) => (\n        <div\n          className={className}\n          data-element={DataElements.ANNOTATION_STYLE_POPUP}\n          onClick={handleClick}\n          ref={measureRef}\n        >\n          {hasBackToMenu &&\n            <div\n              className=\"back-to-menu-container\"\n              data-element={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER}\n            >\n              <ActionButton\n                className=\"back-to-menu-button\"\n                dataElement={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON}\n                label={t('action.backToMenu')}\n                img=\"icon-chevron-left\"\n                onClick={onBackToMenu}\n              />\n            </div>\n          }\n          {/* Do not show checkbox for ellipse as snap mode does not exist for it */}\n          <StylePopup\n            hideSnapModeCheckbox={hideSnapModeCheckbox}\n            colorMapKey={colorMapKey}\n            style={style}\n            isFreeText={isFreeText}\n            isFreeTextAutoSize={isAutoSizeFont}\n            onFreeTextSizeToggle={() => handleFreeTextAutoSizeToggle(annotations[0], setAutoSizeFont, isAutoSizeFont)}\n            isEllipse={isEllipse}\n            isMeasure={isMeasure}\n            onStyleChange={handleStyleChange}\n            onSliderChange={handleSliderChange}\n            onPropertyChange={handlePropertyChange}\n            disableSeparator\n            properties={properties}\n            onRichTextStyleChange={handleRichTextStyleChange}\n            isRedaction={isRedaction}\n            showLineStyleOptions={showLineStyleOptions}\n            onLineStyleChange={handleLineStyleChange}\n          />\n        </div>\n      )}\n    </Measure>\n  );\n};\n\nAnnotationStylePopup.propTypes = propTypes;\n\nexport default AnnotationStylePopup;\n","import AnnotationStylePopup from './AnnotationStylePopup';\n\nexport default AnnotationStylePopup;","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!./AnnotationPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!./CalibrationPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.CalibrationPopup{display:flex;flex-direction:column;align-items:flex-start;padding:12px;width:220px;height:84px;background:#fff;box-shadow:0 0 3px #868e96;border-radius:4px}.CalibrationPopup .pop-switch{margin-top:12px}.CalibrationPopup .pop-switch.ui__choice--disabled .ui__choice__label{color:#cfd4da}.CalibrationPopup .input-container{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:196px;height:32px}.CalibrationPopup .input-container .input-field{width:94px;height:32px}.CalibrationPopup .input-container .input-field.invalid-value{border-color:red}.CalibrationPopup .input-container .input-field .Dropdown__wrapper{width:100%;height:100%}.CalibrationPopup .input-container .input-field .Dropdown__wrapper .Dropdown{height:100%;text-align:left}.CalibrationPopup .input-container .input-field .Dropdown__wrapper .Dropdown__items{width:100%}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".open.AnnotationPopup{visibility:visible}.closed.AnnotationPopup{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.AnnotationPopup{position:absolute;z-index:70;display:flex;justify-content:center;align-items:center}.AnnotationPopup:empty{padding:0}.AnnotationPopup .buttons{display:flex}.AnnotationPopup .Button{margin:4px;width:32px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationPopup .Button{width:42px;height:42px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationPopup .Button{width:42px;height:42px}}.AnnotationPopup .Button:hover{background:var(--popup-button-hover)}.AnnotationPopup .Button .Icon{width:18px;height:18px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationPopup .Button .Icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationPopup .Button .Icon{width:24px;height:24px}}.is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;border-radius:0;justify-content:flex-start;padding-left:var(--padding-small);padding-right:var(--padding-small);margin:0 0 var(--padding-tiny) 0}.is-vertical.AnnotationPopup .Button.main-menu-button:first-child{margin-top:var(--padding-tiny)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;height:32px}}.is-vertical.AnnotationPopup .Button.main-menu-button .Icon{margin-right:10px}.is-vertical.AnnotationPopup .Button.main-menu-button span{white-space:nowrap}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.AnnotationPopup{position:fixed;border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background)}.AnnotationPopup.is-horizontal .container{display:inherit}.AnnotationPopup.is-vertical{flex-direction:column;align-items:flex-start}.shortCuts3D{position:relative}.shortCuts3D .closeButton{position:absolute;right:4px;padding:2px;cursor:pointer;width:20px;text-align:center}.shortCuts3D .row{padding:4px 0;margin:8px 26px 8px 16px}.shortCuts3D .row span{background:#e7ebee;padding:4px 8px;border-radius:4px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nconst DatePicker = ({ onClick, annotation, onDatePickerShow }) => {\n  const dateRef = useRef(null);\n  const dateContainerRef = useRef(null);\n  useEffect(() => {\n    let datePicker;\n    const getDatePicker = async () => {\n      datePicker = await window.Core.createDatePicker({\n        field: dateRef.current,\n        onClick,\n        container: dateContainerRef.current,\n        format: annotation.getDateFormat(),\n      });\n      onDatePickerShow(true);\n    };\n    getDatePicker();\n\n    return () => {\n      datePicker.destroy();\n      datePicker = null;\n      onDatePickerShow(false);\n    };\n  }, []);\n  return (\n    <div data-element=\"datePickerContainer\">\n      <div ref={dateRef} />\n      <div ref={dateContainerRef}/>\n    </div>\n  );\n};\n\nDatePicker.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  annotation: PropTypes.object.isRequired,\n  onDatePickerShow: PropTypes.func.isRequired\n};\n\nexport default DatePicker;\n","import DatePicker from './DatePicker';\n\nexport default DatePicker;","import React, { useState, useEffect, useRef } from 'react';\nimport selectors from 'selectors';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport core from 'core';\nimport actions from 'actions';\nimport { Choice } from '@pdftron/webviewer-react-toolkit';\nimport Dropdown from '../Dropdown';\nimport Tooltip from '../Tooltip';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport {\n  metricUnits,\n  convertUnit,\n  fractionalUnits,\n  floatRegex,\n  inFractionalRegex,\n  ftInFractionalRegex,\n  ftInDecimalRegex,\n  parseFtInDecimal,\n  parseInFractional,\n  parseFtInFractional,\n  hintValues\n} from 'constants/measurementScale';\nimport classNames from 'classnames';\n\nimport './CalibrationPopup.scss';\n\nconst Scale = window.Core.Scale;\n\nconst parseMeasurementContentsByAnnotation = (annotation) => {\n  const factor = annotation.Measure.axis[0].factor;\n  const unit = annotation.Scale[1][1];\n\n  switch (unit) {\n    case 'ft-in':\n      return (annotation.getLineLength() * factor) / 12;\n    case 'in':\n    default:\n      return annotation.getLineLength() * factor;\n  }\n};\n\nconst getDefaultPageUnit = (pageUnit) => {\n  if (pageUnit === 'pt') {\n    return 'pt';\n  }\n  if (metricUnits.includes(pageUnit)) {\n    return 'mm';\n  }\n  return 'in';\n};\n\nconst CalibrationPropType = {\n  annotation: PropTypes.shape({\n    Scale: PropTypes.arrayOf(PropTypes.array),\n  }),\n};\n\nconst CalibrationPopup = ({ annotation }) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n\n  const [\n    measurementUnits,\n    { tempScale, isFractionalUnit, defaultUnit }\n  ] = useSelector((state) => [\n    selectors.getMeasurementUnits(state),\n    selectors.getCalibrationInfo(state)\n  ], shallowEqual);\n  const [valueDisplay, setValueDisplay] = useState('');\n  const inputRef = useRef(null);\n\n  const unitTo = new Scale(tempScale).worldScale?.unit || 'mm';\n  const unitToOptions = isFractionalUnit ? measurementUnits.to.filter((unit) => fractionalUnits.includes(unit)) : measurementUnits.to;\n  const isFractionalUnitsToggleDisabled = !fractionalUnits.includes(unitTo);\n  const valueInputType = (isFractionalUnit || unitTo === 'ft-in') ? 'text' : 'number';\n  const inputValueClass = classNames('input-field', {\n    'invalid-value': !(tempScale && new Scale(tempScale).worldScale?.value > 0)\n  });\n\n  const updateTempScale = (scaleValue, scaleUnit) => {\n    const currentDistance = parseMeasurementContentsByAnnotation(annotation);\n    const currentScale = annotation.Scale;\n    const newRatio = currentDistance / currentScale[1][0];\n    const pageScale = [currentScale[0][0] * newRatio, currentScale[0][1]];\n    const defaultPageUnit = getDefaultPageUnit(scaleUnit);\n    const defaultPageValue = convertUnit(pageScale[0], pageScale[1], defaultPageUnit);\n    dispatch(actions.updateCalibrationInfo({ tempScale: `${defaultPageValue} ${defaultPageUnit} = ${scaleValue} ${scaleUnit}`, isFractionalUnit }));\n  };\n\n  const setValue = (scaleValue) => {\n    updateTempScale(scaleValue, new Scale(tempScale).worldScale?.unit);\n  };\n\n  const setUnitTo = (scaleUnit) => {\n    updateTempScale(new Scale(tempScale).worldScale?.value, scaleUnit);\n  };\n\n  const toggleFractionalUnits = () => {\n    dispatch(actions.updateCalibrationInfo({ tempScale, isFractionalUnit: !isFractionalUnit }));\n  };\n\n  const onValueInputChange = (e) => {\n    setValueDisplay(e.target.value);\n    const inputValue = e.target.value.trim();\n    if (!isFractionalUnit) {\n      if (unitTo === 'ft-in' && ftInDecimalRegex.test(inputValue)) {\n        const result = parseFtInDecimal(inputValue);\n        if (result > 0) {\n          setValue(result);\n          return;\n        }\n      } else if (floatRegex.test(inputValue)) {\n        const result = parseFloat(inputValue) || 0;\n        setValue(result);\n        return;\n      }\n    } else {\n      if (unitTo === 'in') {\n        if (inFractionalRegex.test(inputValue)) {\n          const result = parseInFractional(inputValue);\n          if (result > 0) {\n            setValue(result);\n            return;\n          }\n        }\n      } else if (unitTo === 'ft-in') {\n        if (ftInFractionalRegex.test(inputValue)) {\n          const result = parseFtInFractional(inputValue);\n          if (result > 0) {\n            setValue(result);\n            return;\n          }\n        }\n      }\n    }\n    setValue(0);\n  };\n\n  const onValueInputBlur = () => {\n    updateValueDisplay();\n  };\n\n  const updateValueDisplay = () => {\n    const scaleValue = new Scale(tempScale).worldScale?.value;\n    let newValueDisplay;\n    if (!isFractionalUnit && unitTo !== 'ft-in') {\n      newValueDisplay = `${scaleValue}`;\n    } else {\n      newValueDisplay = Scale.getFormattedValue(scaleValue, unitTo, isFractionalUnit ? 1 / 64 : 0.0001, false, true);\n    }\n    setValueDisplay(newValueDisplay || '');\n  };\n\n  const tempScaleRef = useRef(tempScale);\n  useEffect(() => {\n    tempScaleRef.current = tempScale;\n  }, [tempScale]);\n  useEffect(() => {\n    if (annotation) {\n      const value = parseMeasurementContentsByAnnotation(annotation);\n      const unit = annotation.Scale[1][1];\n      if (defaultUnit) {\n        updateTempScale(convertUnit(value, unit, defaultUnit), defaultUnit);\n      } else {\n        updateTempScale(value, unit);\n      }\n    }\n\n    const onAnnotationChanged = (annotations, action) => {\n      if (action === 'modify' && annotations.length === 1 && annotations[0] === annotation) {\n        const value = parseMeasurementContentsByAnnotation(annotation);\n        const unit = annotation.Scale[1][1];\n        const currentUnit = new Scale(tempScaleRef.current).worldScale?.unit;\n        if (currentUnit) {\n          updateTempScale(convertUnit(value, unit, currentUnit), currentUnit);\n        } else {\n          updateTempScale(value, unit);\n        }\n      }\n    };\n    core.addEventListener('annotationChanged', onAnnotationChanged);\n\n    return () => {\n      core.removeEventListener('annotationChanged', onAnnotationChanged);\n      core.deleteAnnotations([annotation]);\n    };\n  }, [annotation]);\n\n  useEffect(() => {\n    if (inputRef?.current !== document.activeElement) {\n      updateValueDisplay();\n    }\n  }, [tempScale, isFractionalUnit]);\n\n  return (\n    <div className=\"CalibrationPopup\" data-element=\"calibrationPopup\">\n      <div className=\"input-container\">\n        <input\n          className={inputValueClass}\n          ref={inputRef}\n          type={valueInputType}\n          value={valueDisplay}\n          min='0'\n          onChange={onValueInputChange}\n          onBlur={onValueInputBlur}\n          placeholder={isFractionalUnit ? hintValues[unitTo] : (unitTo === 'ft-in' ? hintValues['ft-in decimal'] : '')}\n        />\n        <Tooltip content={'option.measurement.scaleModal.displayUnits'}>\n          <div className=\"input-field\">\n            <Dropdown\n              dataElement=\"calibrationUnits\"\n              items={unitToOptions}\n              currentSelectionKey={unitTo}\n              onClickItem={setUnitTo}\n            />\n          </div>\n        </Tooltip>\n      </div>\n      <Tooltip content={t('option.measurement.scaleModal.fractionUnitsTooltip')}>\n        <div>\n          <Choice\n            isSwitch\n            leftLabel\n            label={t('option.measurement.scaleModal.fractionalUnits')}\n            disabled={isFractionalUnitsToggleDisabled}\n            checked={isFractionalUnit}\n            id=\"calibration-popup-fractional-units\"\n            className=\"pop-switch\"\n            onChange={toggleFractionalUnits}\n          />\n        </div>\n      </Tooltip>\n    </div>\n  );\n};\n\nCalibrationPopup.propTypes = CalibrationPropType;\n\nexport default CalibrationPopup;\n","import CalibrationPopup from './CalibrationPopup';\n\nexport default CalibrationPopup;","import React, { useState } from 'react';\nimport Draggable from 'react-draggable';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { FocusTrap } from '@pdftron/webviewer-react-toolkit';\n\nimport ActionButton from 'components/ActionButton';\nimport AnnotationStylePopup from 'components/AnnotationStylePopup';\nimport DatePicker from 'components/DatePicker';\nimport CustomizablePopup from 'components/CustomizablePopup';\nimport CalibrationPopup from 'components/CalibrationPopup';\n\nimport { getDataWithKey, mapToolNameToKey, mapAnnotationToKey } from 'constants/map';\n\nimport DataElements from 'constants/dataElement';\n\nimport './AnnotationPopup.scss';\nimport getRootNode from 'helpers/getRootNode';\n\nconst propTypes = {\n  isMobile: PropTypes.bool,\n  isIE: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  isRightClickMenu: PropTypes.bool,\n  isNotesPanelOpenOrActive: PropTypes.bool,\n  isRichTextPopupOpen: PropTypes.bool,\n  isLinkModalOpen: PropTypes.bool,\n  isWarningModalOpen: PropTypes.bool,\n  isContextMenuPopupOpen: PropTypes.bool,\n\n  focusedAnnotation: PropTypes.object,\n  popupRef: PropTypes.any,\n  position: PropTypes.object,\n\n  showViewFileButton: PropTypes.bool,\n  onViewFile: PropTypes.func,\n\n  showCommentButton: PropTypes.bool,\n  onCommentAnnotation: PropTypes.func,\n  isDateFreeTextCanEdit: PropTypes.bool,\n  isDatePickerOpen: PropTypes.bool,\n  handleDateChange: PropTypes.func,\n  onDatePickerShow: PropTypes.func,\n  isCalibrationPopupOpen: PropTypes.bool,\n\n  showEditStyleButton: PropTypes.bool,\n  isStylePopupOpen: PropTypes.bool,\n  hideSnapModeCheckbox: PropTypes.bool,\n  openEditStylePopup: PropTypes.func,\n  closeEditStylePopup: PropTypes.func,\n  annotationStyle: PropTypes.object,\n  onResize: PropTypes.func,\n\n  showContentEditButton: PropTypes.bool,\n  onEditContent: PropTypes.func,\n  openContentEditDeleteWarningModal: PropTypes.func,\n\n  isAppearanceSignature: PropTypes.bool,\n  onClearAppearanceSignature: PropTypes.func,\n\n  showRedactionButton: PropTypes.bool,\n  onApplyRedaction: PropTypes.func,\n\n  showGroupButton: PropTypes.bool,\n  onGroupAnnotations: PropTypes.func,\n  showUngroupButton: PropTypes.bool,\n  onUngroupAnnotations: PropTypes.func,\n\n  showFormFieldButton: PropTypes.bool,\n  onOpenFormField: PropTypes.func,\n\n  showDeleteButton: PropTypes.bool,\n  onDeleteAnnotation: PropTypes.func,\n\n  showLinkButton: PropTypes.bool,\n  hasAssociatedLink: PropTypes.bool,\n  linkAnnotationToURL: PropTypes.func,\n\n  showFileDownloadButton: PropTypes.bool,\n  downloadFileAttachment: PropTypes.func,\n\n  showAudioPlayButton: PropTypes.bool,\n  handlePlaySound: PropTypes.func,\n\n  showCalibrateButton: PropTypes.bool,\n  onOpenCalibration: PropTypes.func,\n\n  customizableUI: PropTypes.bool,\n  openStylePanel: PropTypes.func,\n  isInReadOnlyMode: PropTypes.bool,\n};\n\nconst AnnotationPopup = ({\n  isMobile,\n  isIE,\n  isOpen,\n  isRightClickMenu,\n  isNotesPanelOpenOrActive,\n  isRichTextPopupOpen,\n  isLinkModalOpen,\n  isWarningModalOpen,\n  isContextMenuPopupOpen,\n\n  focusedAnnotation,\n  popupRef,\n  position,\n\n  showViewFileButton,\n  onViewFile,\n\n  showCommentButton,\n  onCommentAnnotation,\n  isDateFreeTextCanEdit,\n  isDatePickerOpen,\n  handleDateChange,\n  onDatePickerShow,\n  isCalibrationPopupOpen,\n\n  showEditStyleButton,\n  isStylePopupOpen,\n  hideSnapModeCheckbox,\n  openEditStylePopup,\n  closeEditStylePopup,\n  annotationStyle,\n  onResize,\n\n  showContentEditButton,\n  onEditContent,\n  openContentEditDeleteWarningModal,\n\n  isAppearanceSignature,\n  onClearAppearanceSignature,\n\n  showRedactionButton,\n  onApplyRedaction,\n\n  showGroupButton,\n  onGroupAnnotations,\n  showUngroupButton,\n  onUngroupAnnotations,\n\n  showFormFieldButton,\n  onOpenFormField,\n\n  showDeleteButton,\n  onDeleteAnnotation,\n\n  showLinkButton,\n  hasAssociatedLink,\n  linkAnnotationToURL,\n\n  showFileDownloadButton,\n  downloadFileAttachment,\n\n  showAudioPlayButton,\n  handlePlaySound,\n\n  showCalibrateButton,\n  onOpenCalibration,\n\n  customizableUI,\n  openStylePanel,\n  isInReadOnlyMode,\n}) => {\n  const [t] = useTranslation();\n  const [shortCutKeysFor3DVisible, setShortCutKeysFor3DVisible] = useState(false);\n\n  const commentButtonLabel = isDateFreeTextCanEdit ? 'action.changeDate' : 'action.comment';\n  const commentButtonImg = isDateFreeTextCanEdit ? 'icon-tool-fill-and-sign-calendar' : 'icon-header-chat-line';\n  const show3DShortCutButton = !isInReadOnlyMode && focusedAnnotation instanceof window.Core.Annotations.Model3DAnnotation && !isMobile;\n  const isRectangle = focusedAnnotation instanceof window.Core.Annotations.RectangleAnnotation;\n  const isEllipse = focusedAnnotation instanceof window.Core.Annotations.EllipseAnnotation;\n  const isPolygon = focusedAnnotation instanceof window.Core.Annotations.PolygonAnnotation;\n  const isFreeText =\n    focusedAnnotation instanceof window.Core.Annotations.FreeTextAnnotation &&\n    (focusedAnnotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeText ||\n      focusedAnnotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeTextCallout);\n  const isRedaction = focusedAnnotation instanceof window.Core.Annotations.RedactionAnnotation;\n  const colorMapKey = mapAnnotationToKey(focusedAnnotation);\n  const isMeasure = !!focusedAnnotation.Measure;\n  const showLineStyleOptions = getDataWithKey(mapToolNameToKey(focusedAnnotation.ToolName)).hasLineEndings;\n  const isInstanceActive = !window.isApryseWebViewerWebComponent || document.activeElement?.shadowRoot === getRootNode();\n  let StrokeStyle = 'solid';\n  const isContentEdit = focusedAnnotation.isContentEditPlaceholder?.();\n  const isReadOnlySignature = focusedAnnotation instanceof window.Core.Annotations.SignatureWidgetAnnotation && focusedAnnotation.fieldFlags.get(window.Core.Annotations.WidgetFlags.READ_ONLY);\n  try {\n    StrokeStyle = (focusedAnnotation['Style'] === 'dash')\n      ? `${focusedAnnotation['Style']},${focusedAnnotation['Dashes']}`\n      : focusedAnnotation['Style'];\n  } catch (err) {\n    console.error(err);\n  }\n  let properties = {};\n  if (showLineStyleOptions) {\n    properties = {\n      StartLineStyle: focusedAnnotation.getStartStyle(),\n      EndLineStyle: focusedAnnotation.getEndStyle(),\n      StrokeStyle,\n    };\n  }\n\n  if (isRectangle || isEllipse || isPolygon) {\n    properties = {\n      StrokeStyle,\n    };\n  }\n\n  if (isFreeText) {\n    const richTextStyles = focusedAnnotation.getRichTextStyle();\n    const isAutoSizeFont = focusedAnnotation.isAutoSizeFont();\n    const calculatedFontSize = focusedAnnotation.getCalculatedFontSize();\n\n    properties = {\n      Font: focusedAnnotation.Font,\n      FontSize: focusedAnnotation.FontSize,\n      TextAlign: focusedAnnotation.TextAlign,\n      TextVerticalAlign: focusedAnnotation.TextVerticalAlign,\n      bold: richTextStyles?.[0]?.['font-weight'] === 'bold' ?? false,\n      italic: richTextStyles?.[0]?.['font-style'] === 'italic' ?? false,\n      underline: richTextStyles?.[0]?.['text-decoration']?.includes('underline') || richTextStyles?.[0]?.['text-decoration']?.includes('word'),\n      strikeout: richTextStyles?.[0]?.['text-decoration']?.includes('line-through') ?? false,\n      StrokeStyle,\n      isAutoSizeFont,\n      calculatedFontSize,\n    };\n  }\n\n  if (isRedaction) {\n    properties = {\n      OverlayText: focusedAnnotation['OverlayText'],\n      Font: focusedAnnotation['Font'],\n      FontSize: focusedAnnotation['FontSize'],\n      TextAlign: focusedAnnotation['TextAlign']\n    };\n  }\n\n  const renderPopup = () => {\n    switch (true) {\n      case isStylePopupOpen:\n        return (\n          <AnnotationStylePopup\n            annotations={[focusedAnnotation]}\n            style={annotationStyle}\n            isOpen={isOpen}\n            onResize={onResize}\n            isFreeText={isFreeText}\n            isEllipse={isEllipse}\n            isRedaction={isRedaction}\n            isMeasure={isMeasure}\n            colorMapKey={colorMapKey}\n            showLineStyleOptions={showLineStyleOptions}\n            properties={properties}\n            hideSnapModeCheckbox={hideSnapModeCheckbox}\n            hasBackToMenu={isRightClickMenu}\n            onBackToMenu={closeEditStylePopup}\n          />\n        );\n      case isDatePickerOpen:\n        return (\n          <DatePicker onClick={handleDateChange} annotation={focusedAnnotation} onDatePickerShow={onDatePickerShow} />\n        );\n      case isCalibrationPopupOpen:\n        return <CalibrationPopup annotation={focusedAnnotation} />;\n      case shortCutKeysFor3DVisible && focusedAnnotation instanceof window.Core.Annotations.Model3DAnnotation:\n        return (\n          <div className=\"shortCuts3D\">\n            <div className=\"closeButton\" onClick={() => setShortCutKeysFor3DVisible(false)}>x</div>\n            <div className=\"row\">{t('action.rotate3D')} <span>{t('shortcut.rotate3D')}</span></div>\n            <div className=\"row\">{t('action.zoom')} <span>{t('shortcut.zoom3D')}</span></div>\n          </div>\n        );\n      default:\n        return (\n          <FocusTrap\n            locked={isOpen && isInstanceActive && !isRichTextPopupOpen && !isNotesPanelOpenOrActive && !isLinkModalOpen && !isWarningModalOpen && !isFreeText && !isContextMenuPopupOpen}\n          >\n            <div className=\"container\">\n              <CustomizablePopup\n                dataElement={DataElements.ANNOTATION_POPUP}\n                childrenClassName='main-menu-button'\n              >\n                {showViewFileButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"viewFileButton\"\n                    label={isRightClickMenu ? 'action.viewFile' : ''}\n                    title={!isRightClickMenu ? 'action.viewFile' : ''}\n                    img=\"icon-view\"\n                    onClick={onViewFile}\n                  />\n                )}\n                {showCommentButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationCommentButton\"\n                    label={isRightClickMenu ? commentButtonLabel : ''}\n                    title={!isRightClickMenu ? commentButtonLabel : ''}\n                    img={commentButtonImg}\n                    onClick={onCommentAnnotation}\n                  />\n                )}\n                {showEditStyleButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationStyleEditButton\"\n                    label={isRightClickMenu ? 'action.style' : ''}\n                    title={!isRightClickMenu ? 'action.style' : ''}\n                    img=\"icon-menu-style-line\"\n                    onClick={customizableUI ? openStylePanel : openEditStylePopup}\n                  />\n                )}\n                {showContentEditButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationContentEditButton\"\n                    label={isRightClickMenu ? 'action.edit' : ''}\n                    title={!isRightClickMenu ? 'action.edit' : ''}\n                    img=\"ic_edit_page_24px\"\n                    onClick={onEditContent}\n                  />\n                )}\n                {isAppearanceSignature && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationClearSignatureButton\"\n                    label={isReadOnlySignature ? 'action.readOnlySignature' : (isRightClickMenu ? 'action.clearSignature' : '')}\n                    title={isReadOnlySignature ? 'action.readOnlySignature' : (!isRightClickMenu ? 'action.clearSignature' : '')}\n                    img={isReadOnlySignature ? '' : 'icon-delete-line'}\n                    onClick={onClearAppearanceSignature}\n                    isNotClickableSelector={() => isReadOnlySignature}\n                  />\n                )}\n                {showRedactionButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationRedactButton\"\n                    label={isRightClickMenu ? 'action.apply' : ''}\n                    title={!isRightClickMenu ? 'action.apply' : ''}\n                    img=\"ic_check_black_24px\"\n                    onClick={onApplyRedaction}\n                  />\n                )}\n                {showGroupButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationGroupButton\"\n                    label={isRightClickMenu ? 'action.group' : ''}\n                    title={!isRightClickMenu ? 'action.group' : ''}\n                    img=\"group-annotations-icon\"\n                    onClick={onGroupAnnotations}\n                  />\n                )}\n                {showUngroupButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationUngroupButton\"\n                    label={isRightClickMenu ? 'action.ungroup' : ''}\n                    title={!isRightClickMenu ? 'action.ungroup' : ''}\n                    img=\"ungroup-annotations-icon\"\n                    onClick={onUngroupAnnotations}\n                  />\n                )}\n                {showFormFieldButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"formFieldEditButton\"\n                    label={isRightClickMenu ? 'action.formFieldEdit' : ''}\n                    title={!isRightClickMenu ? 'action.formFieldEdit' : ''}\n                    img=\"icon-edit-form-field\"\n                    onClick={onOpenFormField}\n                  />\n                )}\n                {showDeleteButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationDeleteButton\"\n                    label={isRightClickMenu ? 'action.delete' : ''}\n                    title={!isRightClickMenu ? 'action.delete' : ''}\n                    img=\"icon-delete-line\"\n                    onClick={isContentEdit ? openContentEditDeleteWarningModal : onDeleteAnnotation}\n                  />\n                )}\n                {showCalibrateButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement={DataElements.CALIBRATION_POPUP_BUTTON}\n                    label={isRightClickMenu ? 'action.calibrate' : ''}\n                    title={!isRightClickMenu ? 'action.calibrate' : ''}\n                    img=\"calibrate\"\n                    onClick={onOpenCalibration}\n                  />\n                )}\n                {showLinkButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"linkButton\"\n                    label={isRightClickMenu ? 'tool.Link' : ''}\n                    title={!isRightClickMenu ? 'tool.Link' : ''}\n                    img={hasAssociatedLink ? 'icon-tool-unlink' : 'icon-tool-link'}\n                    onClick={linkAnnotationToURL}\n                  />\n                )}\n                {showFileDownloadButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"fileAttachmentDownload\"\n                    label={isRightClickMenu ? 'action.fileAttachmentDownload' : ''}\n                    title={!isRightClickMenu ? 'action.fileAttachmentDownload' : ''}\n                    img=\"icon-download\"\n                    onClick={() => downloadFileAttachment(focusedAnnotation)}\n                  />\n                )}\n                {show3DShortCutButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"shortCutKeysFor3D\"\n                    label={isRightClickMenu ? 'action.viewShortCutKeysFor3D' : ''}\n                    title={!isRightClickMenu ? 'action.viewShortCutKeysFor3D' : ''}\n                    img=\"icon-keyboard\"\n                    onClick={() => setShortCutKeysFor3DVisible(true)}\n                  />\n                )}\n                {showAudioPlayButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"playSoundButton\"\n                    label={isRightClickMenu ? 'action.playAudio' : ''}\n                    title={!isRightClickMenu ? 'action.playAudio' : ''}\n                    img=\"ic_play_24px\"\n                    onClick={() => handlePlaySound(focusedAnnotation)}\n                  />\n                )}\n              </CustomizablePopup>\n            </div>\n          </FocusTrap>\n        );\n    }\n  };\n\n  const annotationPopup = (\n    <div\n      className={classNames({\n        Popup: true,\n        AnnotationPopup: true,\n        open: isOpen,\n        closed: !isOpen,\n        stylePopupOpen: isStylePopupOpen,\n        'is-vertical': isReadOnlySignature ? true : isRightClickMenu,\n        'is-horizontal': isReadOnlySignature ? false : !isRightClickMenu,\n      })}\n      ref={popupRef}\n      data-element={DataElements.ANNOTATION_POPUP}\n      style={{ ...position }}\n    >\n      {renderPopup()}\n    </div>\n  );\n\n  return isIE || isMobile ? (\n    annotationPopup\n  ) : (\n    <Draggable cancel=\".Button, .cell, .sliders-container svg, select, button, input\">{annotationPopup}</Draggable>\n  );\n};\n\nAnnotationPopup.propTypes = propTypes;\n\nexport default AnnotationPopup;","import React, { useState, useEffect, useRef, useCallback, useLayoutEffect } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\n\nimport core from 'core';\nimport { getAnnotationPopupPositionBasedOn } from 'helpers/getPopupPosition';\nimport applyRedactions from 'helpers/applyRedactions';\nimport { isMobile, isIE } from 'helpers/device';\nimport { useTranslation } from 'react-i18next';\nimport { getOpenedWarningModal, getOpenedColorPicker, getDatePicker } from 'helpers/getElements';\nimport getGroupedLinkAnnotations from 'helpers/getGroupedLinkAnnotations';\nimport getHashParameters from 'helpers/getHashParameters';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport { PRIORITY_THREE } from 'constants/actionPriority';\nimport getRootNode from 'helpers/getRootNode';\n\nimport AnnotationPopup from './AnnotationPopup';\n\nimport './AnnotationPopup.scss';\n\nconst { ToolNames } = window.Core.Tools;\nconst { Annotations } = window.Core;\n\nconst propTypes = {\n  focusedAnnotation: PropTypes.object,\n  selectedMultipleAnnotations: PropTypes.bool,\n  canModify: PropTypes.bool,\n  focusedAnnotationStyle: PropTypes.object,\n  isStylePopupOpen: PropTypes.bool,\n  setIsStylePopupOpen: PropTypes.func,\n  isDatePickerOpen: PropTypes.bool,\n  setDatePickerOpen: PropTypes.func,\n  isDatePickerMount: PropTypes.bool,\n  setDatePickerMount: PropTypes.func,\n  hasAssociatedLink: PropTypes.bool,\n  includesFormFieldAnnotation: PropTypes.bool,\n  stylePopupRepositionFlag: PropTypes.bool,\n  setStylePopupRepositionFlag: PropTypes.func,\n  closePopup: PropTypes.func,\n};\n\nconst AnnotationPopupContainer = ({\n  focusedAnnotation,\n  selectedMultipleAnnotations,\n  canModify,\n  focusedAnnotationStyle,\n  isStylePopupOpen,\n  setIsStylePopupOpen,\n  isDatePickerOpen,\n  setDatePickerOpen,\n  isDatePickerMount,\n  setDatePickerMount,\n  hasAssociatedLink,\n  includesFormFieldAnnotation,\n  stylePopupRepositionFlag,\n  setStylePopupRepositionFlag,\n  closePopup,\n}) => {\n  const [\n    isDisabled,\n    isOpen,\n    isContextMenuPopupOpen,\n    isRightClickAnnotationPopupEnabled,\n    isNotesPanelDisabled,\n    isAnnotationStylePopupDisabled,\n    isInlineCommentingDisabled,\n    isNotesPanelOpen,\n    isLinkModalOpen,\n    isWarningModalOpen,\n    isRichTextPopupOpen,\n    isMultiTab,\n    tabManager,\n    tabs,\n    notesInLeftPanel,\n    leftPanelOpen,\n    activeLeftPanel,\n    activeDocumentViewerKey,\n    isAnyCustomPanelOpen,\n    featureFlags,\n    isStylePanelOpen,\n    isStylePanelDisabled,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementDisabled(state, DataElements.ANNOTATION_POPUP),\n      selectors.isElementOpen(state, DataElements.ANNOTATION_POPUP),\n      selectors.isElementOpen(state, DataElements.CONTEXT_MENU_POPUP),\n      selectors.isRightClickAnnotationPopupEnabled(state),\n      selectors.isElementDisabled(state, DataElements.NOTES_PANEL),\n      selectors.isElementDisabled(state, DataElements.ANNOTATION_STYLE_POPUP),\n      selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n      selectors.isElementOpen(state, DataElements.LINK_MODAL),\n      selectors.isElementOpen(state, DataElements.WARNING_MODAL),\n      selectors.isElementOpen(state, 'richTextPopup'),\n      selectors.getIsMultiTab(state),\n      selectors.getTabManager(state),\n      selectors.getTabs(state),\n      selectors.getNotesInLeftPanel(state),\n      selectors.isElementOpen(state, DataElements.LEFT_PANEL),\n      selectors.getActiveLeftPanel(state),\n      selectors.getActiveDocumentViewerKey(state),\n      selectors.isAnyCustomPanelOpen(state),\n      selectors.getFeatureFlags(state),\n      selectors.isElementOpen(state, DataElements.STYLE_PANEL),\n      selectors.isElementDisabled(state, DataElements.STYLE_PANEL),\n    ],\n    shallowEqual,\n  );\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const [isCalibrationPopupOpen, setCalibrationPopupOpen] = useState(false);\n  const popupRef = useRef();\n\n  const isFocusedAnnotationSelected = isRightClickAnnotationPopupEnabled ? core.isAnnotationSelected(focusedAnnotation, activeDocumentViewerKey) : true;\n  const annotManager = core.getAnnotationManager(activeDocumentViewerKey);\n  const isNotesPanelOpenOrActive = isNotesPanelOpen\n    || (notesInLeftPanel && leftPanelOpen && activeLeftPanel === 'notesPanel')\n    || isAnyCustomPanelOpen;\n  const sixtyFramesPerSecondIncrement = 16;\n  // on tablet, the behaviour will be like on desktop, including being draggable\n\n  const { customizableUI } = featureFlags;\n\n  const openStylePanel = () => {\n    if (!isStylePanelOpen && !isStylePanelDisabled) {\n      dispatch(actions.openElement(DataElements.STYLE_PANEL));\n    }\n    closePopup();\n  };\n\n  useOnClickOutside(\n    popupRef,\n    useCallback((e) => {\n      const notesPanel = getRootNode().querySelector(`[data-element=\"${DataElements.NOTES_PANEL}\"]`);\n      const clickedInNotesPanel = notesPanel?.contains(e.target);\n      const clickedInLinkModal = getRootNode().querySelector('.LinkModal.open')?.contains(e.target);\n      const datePicker = getDatePicker();\n      const warningModal = getOpenedWarningModal();\n      const colorPicker = getOpenedColorPicker();\n\n      // the notes panel has mousedown handlers to handle the opening/closing states of this component\n      // we don't want this handler to run when clicked in the notes panel otherwise the opening/closing states may mess up\n      // for example: click on a note will call core.selectAnnotation which triggers the annotationSelected event\n      // and opens this component. If we don't exclude the notes panel this handler will run and close it after\n      if (!clickedInNotesPanel && !clickedInLinkModal && !warningModal && !colorPicker && !datePicker) {\n        if (isRightClickAnnotationPopupEnabled) {\n          closePopup();\n        } else {\n          dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n        }\n      }\n    }, [isRightClickAnnotationPopupEnabled])\n  );\n\n  const setPopupPosition = () => {\n    if (popupRef.current) {\n      setPosition(getAnnotationPopupPositionBasedOn(focusedAnnotation, popupRef, activeDocumentViewerKey));\n    }\n  };\n\n  const handleResize = throttle(() => {\n    if (AnnotationPopupContainer) {\n      setPopupPosition();\n    }\n  }, sixtyFramesPerSecondIncrement);\n\n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  // useLayoutEffect here to avoid flashing issue when popup is close and open on scroll\n  useLayoutEffect(() => {\n    if (focusedAnnotation || isStylePopupOpen || isDatePickerMount) {\n      setPopupPosition();\n    }\n    // canModify is needed here because the effect from useOnAnnotationPopupOpen hook will run again and determine which button to show, which in turn change the popup size and will need to recalculate position\n  }, [focusedAnnotation, isStylePopupOpen, isDatePickerMount, canModify, activeDocumentViewerKey]);\n\n  useEffect(() => {\n    if (focusedAnnotation && focusedAnnotation.ToolName === ToolNames.CALIBRATION_MEASUREMENT) {\n      setCalibrationPopupOpen(true);\n    }\n  }, [focusedAnnotation]);\n\n  useEffect(() => {\n    if (isOpen || isRichTextPopupOpen) {\n      dispatch(actions.closeElement(DataElements.INLINE_COMMENT_POPUP));\n    }\n  }, [isOpen, isRichTextPopupOpen]);\n\n  /* VIEW FILE */\n  const wvServer = !!getHashParameters('webviewerServerURL', null);\n  const acceptFormats = wvServer ? window.Core.SupportedFileFormats.SERVER : window.Core.SupportedFileFormats.CLIENT;\n  const showViewFileButton = focusedAnnotation instanceof Annotations.FileAttachmentAnnotation && isMultiTab\n    && acceptFormats.includes(window.Core.mimeTypeToExtension[focusedAnnotation.getFileMetadata().mimeType]);\n\n  const onViewFile = useCallback(async () => {\n    if (!tabManager || !isMultiTab) {\n      return console.warn('Can\\'t open file in non-multi-tab mode');\n    }\n    const metaData = focusedAnnotation.getFileMetadata();\n    const fileAttachmentTab = tabs.find((tab) => tab.options.filename === metaData.filename);\n    if (fileAttachmentTab) { // If already opened once\n      await tabManager.setActiveTab(fileAttachmentTab.id, true);\n      return;\n    }\n    await tabManager.addTab(await focusedAnnotation.getFileData(), {\n      extension: window.Core.mimeTypeToExtension[metaData.mimeType],\n      filename: metaData.filename,\n      saveCurrentActiveTabState: true,\n      setActive: true,\n    });\n  }, [tabManager, focusedAnnotation, tabs, isMultiTab]);\n\n  /* ALL REACT HOOKS NEED TO BE BEFORE RENDERING */\n  if (isDisabled || !focusedAnnotation) {\n    return null;\n  }\n\n  /* COMMENT / DATE */\n  const selectedAnnotations = core.getSelectedAnnotations(activeDocumentViewerKey);\n  const numberOfSelectedAnnotations = selectedAnnotations.length;\n  const multipleAnnotationsSelected = numberOfSelectedAnnotations > 1;\n  const isFreeTextAnnot = focusedAnnotation instanceof Annotations.FreeTextAnnotation;\n  const isDateFreeTextCanEdit = isFreeTextAnnot && !!focusedAnnotation.getDateFormat() && core.canModifyContents(focusedAnnotation, activeDocumentViewerKey);\n  const numberOfGroups = core.getNumberOfGroups(selectedAnnotations, activeDocumentViewerKey);\n  const canGroup = numberOfGroups > 1;\n  const canUngroup = numberOfGroups === 1 && numberOfSelectedAnnotations > 1 && isFocusedAnnotationSelected;\n  const isAppearanceSignature =\n    focusedAnnotation instanceof Annotations.SignatureWidgetAnnotation\n    && focusedAnnotation.isSignedByAppearance();\n  const isInReadOnlyMode = core.getIsReadOnly();\n\n  const showCommentButton = (\n    (!isNotesPanelDisabled || !isInlineCommentingDisabled)\n    && (!multipleAnnotationsSelected || (multipleAnnotationsSelected && !isFocusedAnnotationSelected))\n    && focusedAnnotation.ToolName !== ToolNames.CROP\n    && !includesFormFieldAnnotation\n    && !focusedAnnotation.isContentEditPlaceholder()\n    && !focusedAnnotation.isUncommittedContentEditPlaceholder()\n    && !isAppearanceSignature\n  );\n\n  const onCommentAnnotation = () => {\n    if (isDateFreeTextCanEdit) {\n      setDatePickerOpen(true);\n      return;\n    }\n\n    dispatch(actions.closeElement('searchPanel'));\n    dispatch(actions.closeElement('redactionPanel'));\n    const contentEditManager = core.getContentEditManager(activeDocumentViewerKey);\n    if (contentEditManager.isInContentEditMode()) {\n      dispatch(actions.closeElement('textEditingPanel'));\n      contentEditManager.endContentEditMode();\n    }\n\n    dispatch(actions.triggerNoteEditing());\n    if (isInlineCommentingDisabled) {\n      dispatch(actions.openElement(DataElements.NOTES_PANEL));\n      dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n    } else {\n      if (!isNotesPanelOpen) {\n        dispatch(actions.openElement(DataElements.INLINE_COMMENT_POPUP));\n      }\n      closePopup();\n    }\n  };\n\n  const handleDateChange = (text) => {\n    annotManager.setNoteContents(focusedAnnotation, text);\n    annotManager.updateAnnotation(focusedAnnotation);\n  };\n\n  const onDatePickerShow = (isDatePickerShowed) => {\n    setDatePickerMount(isDatePickerShowed);\n  };\n\n  /* EDIT STYLE */\n  const hasStyle = Object.keys(focusedAnnotationStyle).length > 0;\n\n  const toolsWithNoStyling = [\n    ToolNames.CROP,\n    ToolNames.RADIO_FORM_FIELD,\n    ToolNames.CHECK_BOX_FIELD,\n    ToolNames.VIDEO_REDACTION,\n    ToolNames.VIDEO_AND_AUDIO_REDACTION,\n    ToolNames.AUDIO_REDACTION,\n  ];\n\n  const showEditStyleButton = (\n    canModify\n    && hasStyle\n    && (!isAnnotationStylePopupDisabled || customizableUI)\n    && (!multipleAnnotationsSelected || canUngroup || (multipleAnnotationsSelected && !isFocusedAnnotationSelected))\n    && !toolsWithNoStyling.includes(focusedAnnotation.ToolName)\n    && !(focusedAnnotation instanceof Annotations.Model3DAnnotation)\n    && !focusedAnnotation.isContentEditPlaceholder()\n    && !focusedAnnotation.isUncommittedContentEditPlaceholder()\n    && !isAppearanceSignature\n  );\n\n  const hideSnapModeCheckbox = focusedAnnotation instanceof Annotations.EllipseAnnotation || !core.isFullPDFEnabled();\n\n  const onResize = () => {\n    setStylePopupRepositionFlag(!stylePopupRepositionFlag);\n  };\n\n  /* EDIT CONTENT */\n  const showContentEditButton =\n    focusedAnnotation.isContentEditPlaceholder()\n    && focusedAnnotation.getContentEditType() === window.Core.ContentEdit.Types.TEXT;\n\n  const onEditContent = async () => {\n    annotManager.trigger('annotationDoubleClicked', focusedAnnotation);\n\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n  };\n\n  /* CLEAR APPEARANCE SIGNATURE */\n  const onClearAppearanceSignature = () => {\n    focusedAnnotation.clearSignature(annotManager);\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n  };\n\n  /* REDACTION */\n  const redactionEnabled = core.isAnnotationRedactable(focusedAnnotation, activeDocumentViewerKey);\n  const showRedactionButton = redactionEnabled && !multipleAnnotationsSelected && !includesFormFieldAnnotation;\n\n  const onApplyRedaction = () => {\n    dispatch(applyRedactions(focusedAnnotation, undefined, activeDocumentViewerKey));\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n  };\n\n  /* GROUP / UNGROUP */\n  const primaryAnnotation = selectedAnnotations.find((selectedAnnotation) => !selectedAnnotation.InReplyTo);\n\n  const showGroupButton =\n    canModify\n    && isFocusedAnnotationSelected\n    && canGroup\n    && !includesFormFieldAnnotation;\n\n  const onGroupAnnotations = () => {\n    core.groupAnnotations(primaryAnnotation, selectedAnnotations, activeDocumentViewerKey);\n  };\n\n  const showUngroupButton = canUngroup;\n\n  const onUngroupAnnotations = () => {\n    core.ungroupAnnotations(selectedAnnotations, activeDocumentViewerKey);\n  };\n\n  /* FORM FIELD */\n  const formFieldCreationManager = core.getFormFieldCreationManager(activeDocumentViewerKey);\n  const isInFormFieldCreationMode = formFieldCreationManager.isInFormFieldCreationMode();\n  const showFormFieldButton = includesFormFieldAnnotation && isInFormFieldCreationMode;\n\n  const onOpenFormField = () => {\n    closePopup();\n    // We disable it while the form field popup is open to prevent having both open\n    // at the same time. We re-enable it when the form field popup is closed.\n    dispatch(actions.disableElement(DataElements.ANNOTATION_POPUP, PRIORITY_THREE));\n    dispatch(actions.openElement(DataElements.FORM_FIELD_EDIT_POPUP));\n  };\n\n  /* DELETE ANNOTATION */\n  const showDeleteButton = canModify;\n\n  const openContentEditDeleteWarningModal = () => {\n    const message = t('option.contentEdit.deletionModal.message');\n    const title = t('option.contentEdit.deletionModal.title');\n    const confirmBtnText = t('action.ok');\n\n    const warning = {\n      message,\n      title,\n      confirmBtnText,\n      onConfirm: () => onDeleteAnnotation(),\n    };\n    dispatch(actions.showWarningMessage(warning));\n  };\n\n  const onDeleteAnnotation = () => {\n    if (isFocusedAnnotationSelected) {\n      core.deleteAnnotations(core.getSelectedAnnotations(activeDocumentViewerKey), undefined, activeDocumentViewerKey);\n    } else {\n      core.deleteAnnotations([focusedAnnotation], undefined, activeDocumentViewerKey);\n    }\n    closePopup();\n  };\n\n  /* LINK ANNOTATION */\n  const toolsThatCantHaveLinks = [\n    ToolNames.CROP,\n    ToolNames.SIGNATURE,\n    ToolNames.REDACTION,\n    ToolNames.REDACTION2,\n    ToolNames.REDACTION3,\n    ToolNames.REDACTION4,\n    ToolNames.STICKY,\n    ToolNames.STICKY2,\n    ToolNames.STICKY3,\n    ToolNames.STICKY4,\n  ];\n\n  const showLinkButton = (\n    !toolsThatCantHaveLinks.includes(focusedAnnotation.ToolName)\n    && !includesFormFieldAnnotation\n    && !focusedAnnotation.isContentEditPlaceholder()\n    // TODO(Adam): Update this once SoundAnnotation tool is created.\n    && !(focusedAnnotation instanceof Annotations.SoundAnnotation)\n    && !focusedAnnotation.isUncommittedContentEditPlaceholder()\n    && !isAppearanceSignature\n  );\n\n  const showCalibrateButton =\n    canModify\n    && focusedAnnotation.Measure\n    && focusedAnnotation instanceof Annotations.LineAnnotation;\n\n  const onOpenCalibration = () => {\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n    dispatch(actions.openElement(DataElements.CALIBRATION_MODAL));\n  };\n\n  const linkAnnotationToURL = () => {\n    if (hasAssociatedLink) {\n      const annotationsToUnlink = isFocusedAnnotationSelected ? selectedAnnotations : [focusedAnnotation];\n      annotationsToUnlink.forEach((annot) => {\n        const linkAnnotations = getGroupedLinkAnnotations(annot);\n        linkAnnotations.forEach((linkAnnot, index) => {\n          annotManager.ungroupAnnotations([linkAnnot]);\n          if (annot instanceof Annotations.TextHighlightAnnotation && annot.Opacity === 0 && index === 0) {\n            annotManager.deleteAnnotations([annot, linkAnnot], null, true);\n          } else {\n            annotManager.deleteAnnotation(linkAnnot, null, true);\n          }\n        });\n      });\n      closePopup();\n    } else {\n      dispatch(actions.openElement(DataElements.LINK_MODAL));\n    }\n  };\n\n  /* DOWNLOAD FILE ATTACHMENT */\n  const showFileDownloadButton = focusedAnnotation instanceof Annotations.FileAttachmentAnnotation;\n\n  const downloadFileAttachment = (annot) => {\n    // no need to check that annot is of type file annot as the check is done in the JSX\n    // trigger the annotationDoubleClicked event so that it will download the file\n    annotManager.trigger('annotationDoubleClicked', annot);\n  };\n\n  /* AUDIO ANNOTATION */\n  const showAudioPlayButton = (\n    !isIE &&\n    !selectedMultipleAnnotations &&\n    focusedAnnotation instanceof Annotations.SoundAnnotation &&\n    focusedAnnotation.hasAudioData()\n  );\n\n  const handlePlaySound = (annotation) => {\n    dispatch(actions.setActiveSoundAnnotation(annotation));\n    dispatch(actions.triggerResetAudioPlaybackPosition(true));\n    dispatch(actions.openElement('audioPlaybackPopup'));\n  };\n\n  return (\n    <AnnotationPopup\n      isMobile={isMobile()}\n      isIE={isIE}\n      isOpen={isOpen}\n      isRightClickMenu={isRightClickAnnotationPopupEnabled}\n      isNotesPanelOpenOrActive={isNotesPanelOpenOrActive}\n      isRichTextPopupOpen={isRichTextPopupOpen}\n      isLinkModalOpen={isLinkModalOpen}\n      isWarningModalOpen={isWarningModalOpen}\n      isContextMenuPopupOpen={isContextMenuPopupOpen}\n\n      popupRef={popupRef}\n      position={position}\n      focusedAnnotation={focusedAnnotation}\n\n      showViewFileButton={showViewFileButton}\n      onViewFile={onViewFile}\n\n      showCommentButton={showCommentButton}\n      onCommentAnnotation={onCommentAnnotation}\n      isDateFreeTextCanEdit={isDateFreeTextCanEdit}\n      isDatePickerOpen={isDatePickerOpen}\n      handleDateChange={handleDateChange}\n      onDatePickerShow={onDatePickerShow}\n      isCalibrationPopupOpen={isCalibrationPopupOpen}\n\n      showEditStyleButton={showEditStyleButton}\n      isStylePopupOpen={isStylePopupOpen}\n      hideSnapModeCheckbox={hideSnapModeCheckbox}\n      openEditStylePopup={() => setIsStylePopupOpen(true)}\n      closeEditStylePopup={() => setIsStylePopupOpen(false)}\n      annotationStyle={focusedAnnotationStyle}\n      onResize={onResize}\n\n      showContentEditButton={showContentEditButton}\n      onEditContent={onEditContent}\n      openContentEditDeleteWarningModal={openContentEditDeleteWarningModal}\n\n      isAppearanceSignature={isAppearanceSignature}\n      onClearAppearanceSignature={onClearAppearanceSignature}\n\n      showRedactionButton={showRedactionButton}\n      onApplyRedaction={onApplyRedaction}\n\n      showGroupButton={showGroupButton}\n      onGroupAnnotations={onGroupAnnotations}\n      showUngroupButton={showUngroupButton}\n      onUngroupAnnotations={onUngroupAnnotations}\n\n      showFormFieldButton={showFormFieldButton}\n      onOpenFormField={onOpenFormField}\n\n      showDeleteButton={showDeleteButton}\n      onDeleteAnnotation={onDeleteAnnotation}\n\n      showLinkButton={showLinkButton}\n      hasAssociatedLink={hasAssociatedLink}\n      linkAnnotationToURL={linkAnnotationToURL}\n\n      showFileDownloadButton={showFileDownloadButton}\n      downloadFileAttachment={downloadFileAttachment}\n\n      showAudioPlayButton={showAudioPlayButton}\n      handlePlaySound={handlePlaySound}\n\n      showCalibrateButton={showCalibrateButton}\n      onOpenCalibration={onOpenCalibration}\n\n      customizableUI={customizableUI}\n      openStylePanel={openStylePanel}\n      isStylePanelOpen={isStylePanelOpen}\n      isInReadOnlyMode={isInReadOnlyMode}\n    />\n  );\n};\n\nAnnotationPopupContainer.propTypes = propTypes;\n\nexport default AnnotationPopupContainer;\n","import AnnotationPopupContainer from './AnnotationPopupContainer';\n\nexport default AnnotationPopupContainer;"],"sourceRoot":""}