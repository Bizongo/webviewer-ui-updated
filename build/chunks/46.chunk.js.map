{"version":3,"sources":["webpack:///./src/components/StylePicker/ColorPicker/ColorPicker.js","webpack:///./src/components/StylePicker/ColorPicker/index.js","webpack:///./src/components/StylePicker/ColorPicker/ColorPicker.scss?11f3","webpack:///./src/components/StylePicker/ColorPicker/ColorPicker.scss","webpack:///./src/components/RichTextStyleEditor/RichTextStyleEditor.scss?72c3","webpack:///./src/components/RichTextStyleEditor/RichTextStyleEditor.scss","webpack:///./src/components/RichTextStyleEditor/RichTextStyleEditor.js","webpack:///./src/components/RichTextStyleEditor/index.js"],"names":["parseColor","color","_parsedColor","_parsedColor2","parsedColor","toHexString","toLowerCase","transparentIcon","React","createElement","width","height","className","classNames","stroke","x1","y1","x2","y2","strokeWidth","strokeLinecap","propTypes","PropTypes","any","ColorPicker","_ref","onColorChange","_ref$hasTransparentCo","hasTransparentColor","activeTool","type","activeToolName","Object","values","window","Core","Tools","ToolNames","includes","EDIT","store","useStore","t","useTranslation","dispatch","useDispatch","colors","_slicedToArray","useSelector","state","selectors","getColors","_useState2","useState","selectedColor","setSelectedColor","_useState4","isExpanded","setIsExpanded","forceExpandRef","useRef","useEffect","current","getCustomColorAndRemove","customColor","getCustomColor","getState","actions","setCustomColor","handleAddColor","useCallback","openElement","getInstanceNode","addEventListener","Events","VISIBILITY_CHANGED","onVisibilityChanged","e","_e$detail","detail","element","isVisible","newColors","concat","_toConsumableArray","setColors","removeEventListener","length","palette","map","push","indexOf","shouldHideShowMoreButton","showCopyButtonDisabled","isDeleteDisabled","slice","Fragment","i","key","onClick","aria-label","active","cell","border","style","backgroundColor","Button","img","title","dataElement","indexToDelete","nextIndex","splice","disabled","hidden","api","content","__esModule","default","module","options","styleTag","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode","exports","locals","___CSS_LOADER_API_IMPORT___","annotation","object","editor","shape","TextColor","RichTextStyle","isFreeTextAutoSize","bool","onFreeTextSizeToggle","func","onPropertyChange","onRichTextStyleChange","isRedaction","isRichTextEditMode","setIsRichTextEditMode","isTextStylePickerHidden","RichTextStyleEditor","_ref4","_RichTextStyle$","_ref5","_RichTextStyle$2","_RichTextStyle$3","_RichTextStyle$3$text","_RichTextStyle$4","_RichTextStyle$4$text","_RichTextStyle$0$text","_RichTextStyle$5","_RichTextStyle$5$text","_RichTextStyle$6","_RichTextStyle$7","textSizeSliderComponent","fonts","getFonts","shallowEqual","format","setFormat","editorRef","annotationRef","propertiesRef","oldSelectionRef","richTextEditModeRef","handleSelectionChange","range","oldRange","setSelection","index","getFormat","handleTextChange","_editorRef$current","getSelection","core","disableElements","DataElements","ANNOTATION_STYLE_POPUP","enableElements","_editorRef$current2","_ref2","_ref3","_stylesTemp$textDeco","_stylesTemp$textDeco2","_stylesTemp$textDeco3","_stylesTemp$textDeco4","StrokeStyle","err","console","error","stylesTemp","getRichTextStyle","Font","FontSize","TextAlign","TextVerticalAlign","bold","italic","underline","strikeout","size","font","calculatedFontSize","getCalculatedFontSize","handleEditorBlur","handleEditorFocus","properties","Annotations","Color","Array","isArray","lastSelectedColor","_i","_propertiesToCheck","prop","undefined","applyFormat","formatKey","value","_editorRef$current3","_editorRef$current4","_objectSpread","_defineProperty","defaults","strike","quillFont","quillFontSize","originalSize","onMouseDown","preventDefault","TextStylePicker","property","_editorRef$current$ge2","blur","adjustFreeTextBoundingBox","setTimeout","getAnnotationManager","getEditBoxManager","focusBox","propertyTranslation","freeText","isAutoSized","resizeAnnotation","_editorRef$current$ge","newSelection","currentFormat","handleTextFormatChange","stateless","isFreeText","name","handleColorChange","memo"],"mappings":"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","file":"chunks/46.chunk.js","sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport './ColorPicker.scss';\nimport { useTranslation } from 'react-i18next';\nimport PropTypes from 'prop-types';\nimport actions from 'actions';\nimport { useDispatch, useStore, useSelector } from 'react-redux';\nimport Events from 'constants/events';\nimport { getInstanceNode } from 'helpers/getRootNode';\nimport selectors from 'selectors';\nimport Button from 'components/Button';\n\nconst parseColor = (color) => {\n  if (!color) {\n    return color;\n  }\n  let parsedColor = color;\n  if (parsedColor?.toHexString) {\n    parsedColor = parsedColor.toHexString();\n  }\n  if (parsedColor?.toLowerCase) {\n    parsedColor = parsedColor.toLowerCase();\n  }\n\n  return parsedColor;\n};\n\nconst TRANSPARENT_COLOR = 'transparent';\n\nconst transparentIcon = (\n  <svg\n    width=\"100%\"\n    height=\"100%\"\n    className={classNames('transparent')}\n  >\n    <line stroke=\"#d82e28\" x1=\"0\" y1=\"100%\" x2=\"100%\" y2=\"0\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n  </svg>\n);\n\n\nconst propTypes = {\n  color: PropTypes.any\n};\n\nconst ColorPicker = ({\n  onColorChange,\n  hasTransparentColor = false,\n  color,\n  activeTool,\n  type,\n}) => {\n  const activeToolName = Object.values(window.Core.Tools.ToolNames).includes(activeTool) ? activeTool : window.Core.Tools.ToolNames.EDIT;\n  const store = useStore();\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const [colors] = useSelector((state) => [\n    selectors.getColors(state, activeToolName, type),\n  ]);\n  const [selectedColor, setSelectedColor] = useState();\n  const [isExpanded, setIsExpanded] = useState(false);\n  const forceExpandRef = useRef(true);\n\n  useEffect(() => {\n    forceExpandRef.current = true;\n  }, [activeToolName, color]);\n\n  useEffect(() => {\n    if (color) {\n      setSelectedColor(parseColor(color));\n    }\n  }, [color]);\n\n  const getCustomColorAndRemove = () => {\n    const customColor = selectors.getCustomColor(store.getState());\n    dispatch(actions.setCustomColor(null));\n    return customColor;\n  };\n\n  const handleAddColor = useCallback(() => {\n    dispatch(actions.openElement('ColorPickerModal'));\n    const onVisibilityChanged = (e) => {\n      const { element, isVisible } = e.detail;\n      if (element === 'ColorPickerModal' && !isVisible) {\n        const color = parseColor(getCustomColorAndRemove());\n        if (color) {\n          if (colors.includes(color)) {\n            setSelectedColor(color);\n            onColorChange(color);\n          } else {\n            const newColors = [...colors, color];\n            dispatch(actions.setColors(newColors, activeToolName, type, true));\n            setSelectedColor(color);\n            onColorChange(color);\n          }\n        }\n      }\n      getInstanceNode().removeEventListener(Events.VISIBILITY_CHANGED, onVisibilityChanged);\n    };\n    getInstanceNode().addEventListener(Events.VISIBILITY_CHANGED, onVisibilityChanged);\n  }, [colors?.length, dispatch, setSelectedColor, onColorChange, getCustomColorAndRemove, type, activeToolName]);\n\n  const handleDelete = () => {\n    const color = parseColor(selectedColor);\n    const newColors = [...colors];\n    const indexToDelete = newColors.indexOf(color);\n    if (indexToDelete > -1) {\n      const nextIndex = indexToDelete === newColors.length - 1 ? 0 : indexToDelete + 1;\n      setSelectedColor(colors[nextIndex]);\n      onColorChange(colors[nextIndex]);\n      newColors.splice(indexToDelete, 1);\n      dispatch(actions.setColors(newColors, activeToolName, type, true));\n    }\n  };\n\n  const handleCopyColor = () => {\n    const color = parseColor(selectedColor);\n    const newColors = [...colors, color];\n    dispatch(actions.setColors(newColors, activeToolName, type, true));\n  };\n\n  const toggleExpanded = () => {\n    const newValue = !isExpanded;\n    setIsExpanded(newValue);\n  };\n\n  let palette = colors.map((color) => color.toLowerCase());\n  if (hasTransparentColor) {\n    palette.push(TRANSPARENT_COLOR);\n  }\n\n  if (!selectedColor) {\n    setSelectedColor('transparent');\n  }\n\n  if (palette.indexOf(selectedColor) > 6 && !isExpanded && forceExpandRef.current) {\n    setIsExpanded(true);\n    forceExpandRef.current = false;\n  }\n\n  const shouldHideShowMoreButton = palette.length <= 7;\n  const showCopyButtonDisabled = !(selectedColor && !palette.includes(selectedColor));\n  const isDeleteDisabled = palette.length <= 1 || !showCopyButtonDisabled;\n\n  if (!isExpanded) {\n    palette = palette.slice(0, 7);\n  }\n\n  return (\n    <>\n      <div className={classNames('ColorPalette')}>\n        {palette.map((color) => parseColor(color)).map((color, i) => (\n          !color\n            ? <div key={i} className=\"dummy-cell\"/>\n            : <button\n              key={i}\n              className=\"cell-container\"\n              onClick={() => {\n                setSelectedColor(color);\n                onColorChange(color);\n              }}\n              aria-label={`${t('option.colorPalette.colorLabel')} ${i + 1}`}\n            >\n              <div\n                className={classNames({\n                  'cell-outer': true,\n                  active: parseColor(selectedColor) === color || (!parseColor(selectedColor) && color === TRANSPARENT_COLOR),\n                })}\n              >\n                <div\n                  className={classNames({\n                    cell: true,\n                    border: color === '#ffffff' || color === TRANSPARENT_COLOR,\n                  })}\n                  style={{ backgroundColor: color }}\n                >\n                  {color === TRANSPARENT_COLOR && transparentIcon}\n                </div>\n              </div>\n            </button>\n        ))}\n      </div>\n      <div className=\"palette-controls\">\n        <div className=\"button-container\">\n          <Button\n            img=\"icon-header-zoom-in-line\"\n            title={t('action.addNewColor')}\n            onClick={handleAddColor}\n            className=\"control-button\"\n            dataElement=\"addCustomColor\"\n          />\n          <Button\n            img=\"icon-delete-line\"\n            title={t('action.deleteColor')}\n            onClick={handleDelete}\n            disabled={isDeleteDisabled}\n            className=\"control-button\"\n            dataElement=\"deleteSelectedColor\"\n          />\n          <Button\n            img=\"icon-copy2\"\n            title={t('action.copySelectedColor')}\n            onClick={handleCopyColor}\n            disabled={showCopyButtonDisabled}\n            className=\"control-button\"\n            dataElement=\"copySelectedColor\"\n          />\n        </div>\n        <button className={classNames('show-more-button control-button', {\n          hidden: shouldHideShowMoreButton,\n        })} onClick={toggleExpanded}>\n          {t(isExpanded ? 'message.showLess' : 'message.showMore')}\n        </button>\n      </div>\n    </>\n  );\n};\n\nColorPicker.propTypes = propTypes;\n\nexport default ColorPicker;","import ColorPicker from './ColorPicker';\n\nexport default ColorPicker;","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js!./ColorPicker.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.StylePicker .ColorPalette{display:flex;flex-wrap:wrap;display:grid;grid-template-columns:repeat(7,1fr);grid-row-gap:8px;row-gap:8px;justify-items:center}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.StylePicker .ColorPalette{width:196px}}.StylePicker .ColorPalette.padding{padding:4px 12px 8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette{max-width:450px;width:auto}}@media(max-width:640px)and (-ms-high-contrast:active),(max-width:640px)and (-ms-high-contrast:none){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette{width:308px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette{max-width:450px;width:auto}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette{width:308px}}}.StylePicker .ColorPalette .cell-container{padding:0;border:none;background-color:transparent;flex:1 0 14%;cursor:pointer;width:28px;height:28px;display:flex;align-items:center;justify-content:center}:host(:not([data-tabbing=true])) .StylePicker .ColorPalette .cell-container,html:not([data-tabbing=true]) .StylePicker .ColorPalette .cell-container{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette .cell-container{width:44px;height:44px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette .cell-container{width:44px;height:44px}}.StylePicker .ColorPalette .cell-container .cell-outer.active{border:1px solid var(--color-palette-border);width:26px;height:26px;border-radius:10000000px;display:flex;align-items:center;justify-content:center}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette .cell-container .cell-outer.active{width:36px;height:36px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette .cell-container .cell-outer.active{width:36px;height:36px}}.StylePicker .ColorPalette .cell-container .cell-outer .cell{width:18px;height:18px;border-radius:10000000px}.StylePicker .ColorPalette .cell-container .cell-outer .cell .transparent{border:2px solid var(--faded-text);border-radius:10000000px}.StylePicker .ColorPalette .cell-container .cell-outer .cell.border{border:1px solid var(--white-color-palette-border)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette .cell-container .cell-outer .cell{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette .cell-container .cell-outer .cell{width:24px;height:24px}}.StylePicker .palette-controls{padding-right:12px;padding-left:2px;display:flex;justify-content:space-between}.StylePicker .palette-controls .button-container{display:flex;grid-gap:8px;gap:8px}.StylePicker .palette-controls .control-button{display:flex;align-items:center;justify-content:center;text-align:center;min-width:32px;min-height:32px;padding:0;border:none;background-color:transparent;cursor:pointer;border-radius:4px}:host(:not([data-tabbing=true])) .StylePicker .palette-controls .control-button,html:not([data-tabbing=true]) .StylePicker .palette-controls .control-button{outline:none}.StylePicker .palette-controls .control-button.show-more-button{color:var(--ribbon-active-color)}.StylePicker .palette-controls .control-button.show-more-button:hover{background:none;color:var(--primary-button-hover)}.StylePicker .palette-controls .control-button:disabled{cursor:default}.StylePicker .palette-controls .control-button:disabled .Icon{color:var(--disabled-icon)}.StylePicker .palette-controls .control-button.hidden{display:none}.StylePicker .palette-controls .control-button:hover{background:var(--view-header-button-hover)}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!./RichTextStyleEditor.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.RichTextStyleEditor{margin-bottom:16px}.RichTextStyleEditor .menu-items{margin-bottom:8px!important}.RichTextStyleEditor .menu-items .icon-grid{padding-top:12px;grid-row-gap:12px;row-gap:12px}.RichTextStyleEditor .menu-items .icon-grid .row{padding-top:0}.RichTextStyleEditor .menu-items .icon-grid .row.isRedaction{padding-bottom:8px}.RichTextStyleEditor .menu-items .icon-grid .auto-size-checkbox{padding-top:4px;padding-bottom:8px}.RichTextStyleEditor .Dropdown__wrapper{width:100%}.RichTextStyleEditor .Dropdown__wrapper .Dropdown{width:100%!important}.RichTextStyleEditor .Dropdown__wrapper .Dropdown__items{right:unset}.RichTextStyleEditor .FontSizeDropdown{width:100%}.RichTextStyleEditor .ColorPalette{padding-bottom:8px}.RichTextStyleEditor .text-size-slider{margin-top:16px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RichTextStyleEditor .icon-grid{display:flex;flex-direction:column}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .RichTextStyleEditor .icon-grid{display:flex;flex-direction:column}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport ColorPicker from 'components/StylePicker/ColorPicker';\nimport core from 'core';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport './RichTextStyleEditor.scss';\nimport DataElements from 'constants/dataElement';\nimport TextStylePicker from 'components/TextStylePicker';\nimport adjustFreeTextBoundingBox from 'helpers/adjustFreeTextBoundingBox';\n\nconst propTypes = {\n  annotation: PropTypes.object,\n  editor: PropTypes.object,\n  style: PropTypes.shape({\n    TextColor: PropTypes.object,\n    RichTextStyle: PropTypes.any,\n  }),\n  isFreeTextAutoSize: PropTypes.bool,\n  onFreeTextSizeToggle: PropTypes.func,\n  onPropertyChange: PropTypes.func,\n  onRichTextStyleChange: PropTypes.func,\n  isRedaction: PropTypes.bool,\n  isRichTextEditMode: PropTypes.bool,\n  setIsRichTextEditMode: PropTypes.func,\n  isTextStylePickerHidden: PropTypes.bool,\n};\n\nconst RichTextStyleEditor = ({\n  annotation, editor,\n  style,\n  isFreeTextAutoSize,\n  onFreeTextSizeToggle,\n  onPropertyChange,\n  onRichTextStyleChange,\n  isRichTextEditMode,\n  setIsRichTextEditMode,\n  isRedaction,\n  isTextStylePickerHidden,\n  activeTool,\n  textSizeSliderComponent,\n}) => {\n  const [\n    fonts,\n  ] = useSelector(\n    (state) => [\n      selectors.getFonts(state),\n    ],\n    shallowEqual,\n  );\n\n  const [format, setFormat] = useState({});\n  const editorRef = useRef(null);\n  const annotationRef = useRef(null);\n  const propertiesRef = useRef({});\n  const dispatch = useDispatch();\n  const oldSelectionRef = useRef();\n  const richTextEditModeRef = useRef();\n  richTextEditModeRef.current = isRichTextEditMode;\n\n  useEffect(() => {\n    const handleSelectionChange = (range, oldRange) => {\n      const shouldRestoreLostSelection = !range && oldRange && editorRef.current;\n      if (shouldRestoreLostSelection) {\n        editorRef.current.setSelection(oldRange.index, oldRange.length);\n      }\n      if (range && editorRef.current) {\n        setFormat(getFormat(range));\n      }\n    };\n    const handleTextChange = () => {\n      setFormat(getFormat(editorRef.current?.getSelection()));\n    };\n    core.addEventListener('editorSelectionChanged', handleSelectionChange);\n    core.addEventListener('editorTextChanged', handleTextChange);\n    // Have to disable instead of closing because annotation popup will reopen itself\n    dispatch(actions.disableElements([DataElements.ANNOTATION_STYLE_POPUP]));\n    return () => {\n      core.removeEventListener('editorSelectionChanged', handleSelectionChange);\n      core.removeEventListener('editorTextChanged', handleTextChange);\n      dispatch(actions.enableElements([DataElements.ANNOTATION_STYLE_POPUP]));\n    };\n  }, []);\n\n  useEffect(() => {\n    editorRef.current = editor;\n    annotationRef.current = annotation;\n    if (isRichTextEditMode && annotation) {\n      let StrokeStyle = 'solid';\n      try {\n        StrokeStyle = (annotation['Style'] === 'dash')\n          ? `${annotation['Style']},${annotation['Dashes']}`\n          : annotation['Style'];\n      } catch (err) {\n        console.error(err);\n      }\n      const richTextStyles = annotation.getRichTextStyle();\n      const stylesTemp = richTextStyles[0];\n\n      propertiesRef.current = {\n        Font: annotation.Font,\n        FontSize: annotation.FontSize,\n        TextAlign: annotation.TextAlign,\n        TextVerticalAlign: annotation.TextVerticalAlign,\n        bold: stylesTemp?.['font-weight'] === 'bold' ?? false,\n        italic: stylesTemp?.['font-style'] === 'italic' ?? false,\n        underline: stylesTemp?.['text-decoration']?.includes('underline')\n          || stylesTemp?.['text-decoration']?.includes('word'),\n        strikeout: stylesTemp?.['text-decoration']?.includes('line-through') ?? false,\n        size: stylesTemp?.['font-size'],\n        font: stylesTemp?.['font-family'],\n        StrokeStyle,\n        calculatedFontSize: annotation.getCalculatedFontSize()\n      };\n    }\n\n    setFormat(getFormat(editorRef.current?.getSelection()));\n\n    if (oldSelectionRef.current) {\n      editorRef.current.setSelection(oldSelectionRef.current);\n      oldSelectionRef.current = null;\n    }\n  }, [annotation, editor, isRichTextEditMode]);\n\n  useEffect(() => {\n    const handleEditorBlur = () => {\n      editorRef.current = null;\n      annotationRef.current = null;\n      setIsRichTextEditMode(false);\n    };\n    const handleEditorFocus = () => {\n      setIsRichTextEditMode(true);\n    };\n\n    core.addEventListener('editorBlur', handleEditorBlur);\n    core.addEventListener('editorFocus', handleEditorFocus);\n    return () => {\n      core.removeEventListener('editorBlur', handleEditorBlur);\n      core.removeEventListener('editorFocus', handleEditorFocus);\n    };\n  }, [dispatch]);\n\n\n  const getFormat = (range) => {\n    if (!range) {\n      return {};\n    }\n\n    const format = editorRef.current.getFormat(range.index, range.length);\n\n    if (typeof format.color === 'string') {\n      format.color = new window.Core.Annotations.Color(format.color);\n    } else if (Array.isArray(format.color)) {\n      // the selection contains multiple color, so we set the current color to the last selected color\n      const lastSelectedColor = new window.Core.Annotations.Color(format.color[format.color.length - 1]);\n      format.color = lastSelectedColor;\n    } else if (!format.color) {\n      format.color = annotationRef.current.TextColor;\n    }\n\n    const propertiesToCheck = ['font', 'size', 'originalSize'];\n\n    for (const prop of propertiesToCheck) {\n      if (format[prop] && Array.isArray(format[prop])) {\n        format[prop] = undefined;\n      }\n    }\n\n    return format;\n  };\n\n  const handleTextFormatChange = (format) => () => {\n    let { index, length } = editorRef.current.getSelection();\n    if (length === 0) {\n      oldSelectionRef.current = { index, length };\n      const newSelection = editorRef.current.getSelection();\n      index = newSelection.index;\n      length = newSelection.length;\n    }\n    const currentFormat = editorRef.current.getFormat(index, length);\n\n    applyFormat(format, !currentFormat[format]);\n  };\n\n  const handleColorChange = (name, color) => {\n    if (!richTextEditModeRef.current) {\n      onPropertyChange(name, color);\n      return;\n    }\n    applyFormat('color', color.toHexString());\n  };\n\n  const applyFormat = (formatKey, value) => {\n    if (formatKey === 'size') {\n      editorRef.current?.format('applyCustomFontSize', value);\n    } else {\n      editorRef.current?.format(formatKey, value);\n    }\n\n    if (formatKey === 'color') {\n      value = new window.Core.Annotations.Color(value);\n    }\n\n    // format the entire editor doesn't trigger the editorTextChanged event, so we set the format state here\n    setFormat({\n      ...format,\n      [formatKey]: value\n    });\n  };\n\n  // onPropertyChange\n  const handlePropertyChange = (property, value) => {\n    if (!richTextEditModeRef.current) {\n      onPropertyChange(property, value);\n      return;\n    }\n\n    const { index, length } = editorRef.current.getSelection();\n    const annotation = annotationRef.current;\n    annotation[property] = value;\n    editorRef.current.blur();\n    if (property === 'FontSize' || property === 'Font') {\n      adjustFreeTextBoundingBox(annotation);\n    }\n    setTimeout(() => {\n      oldSelectionRef.current = { index, length };\n      const editBoxManager = core.getAnnotationManager().getEditBoxManager();\n      editBoxManager.focusBox(annotation);\n    }, 0);\n  };\n\n\n  // onRichTextStyleChange\n  const handleRichTextStyleChange = (property, value) => {\n    if (!richTextEditModeRef.current) {\n      onRichTextStyleChange(property, value);\n      return;\n    }\n\n    const propertyTranslation = {\n      'font-weight': 'bold',\n      'font-style': 'italic',\n      'underline': 'underline',\n      'line-through': 'strike',\n      'font-family': 'font',\n      'font-size': 'size',\n    };\n    if (property === 'font-family' || property === 'font-size') {\n      applyFormat(propertyTranslation[property], value);\n      const freeText = annotationRef.current;\n      if (freeText.isAutoSized()) {\n        const editBoxManager = core.getAnnotationManager().getEditBoxManager();\n        editBoxManager.resizeAnnotation(freeText);\n      }\n    } else {\n      handleTextFormatChange(propertyTranslation[property])();\n    }\n  };\n\n  let properties = {};\n\n  const { RichTextStyle } = style;\n  const defaults = {\n    bold: RichTextStyle?.[0]?.['font-weight'] === 'bold' ?? false,\n    italic: RichTextStyle?.[0]?.['font-style'] === 'italic' ?? false,\n    underline: RichTextStyle?.[0]?.['text-decoration']?.includes('underline') || RichTextStyle?.[0]?.['text-decoration']?.includes('word'),\n    strikeout: RichTextStyle?.[0]?.['text-decoration']?.includes('line-through') ?? false,\n    font: RichTextStyle?.[0]?.['font-family'],\n    size: RichTextStyle?.[0]?.['font-size'],\n    StrokeStyle: 'solid',\n  };\n\n  properties = {\n    ...style,\n    ...defaults,\n  };\n\n  if (isRichTextEditMode && annotation) {\n    propertiesRef.current.bold = format.bold;\n    propertiesRef.current.italic = format.italic;\n    propertiesRef.current.underline = format.underline;\n    propertiesRef.current.strikeout = format.strike;\n    propertiesRef.current.quillFont = format.font || propertiesRef.current.Font;\n    propertiesRef.current.quillFontSize = format.originalSize || propertiesRef.current.FontSize;\n  }\n\n  return (\n    <div className=\"RichTextStyleEditor\"\n      onMouseDown={(e) => {\n        if (e.type !== 'touchstart' && isRichTextEditMode) {\n          e.preventDefault();\n        }\n      }}\n    >\n      {!isTextStylePickerHidden && (\n        <div className=\"menu-items\">\n          <TextStylePicker\n            fonts={fonts}\n            onPropertyChange={handlePropertyChange}\n            onRichTextStyleChange={handleRichTextStyleChange}\n            properties={isRichTextEditMode ? propertiesRef.current : properties}\n            stateless={true}\n            isFreeText={!isRedaction}\n            onFreeTextSizeToggle={onFreeTextSizeToggle}\n            isFreeTextAutoSize={isFreeTextAutoSize}\n            isRichTextEditMode={isRichTextEditMode}\n            isRedaction={isRedaction}\n          />\n        </div>\n      )}\n      <ColorPicker\n        onColorChange={(color) => {\n          handleColorChange('TextColor', new window.Core.Annotations.Color(color));\n        }}\n        color={isRichTextEditMode ? format.color : style['TextColor']}\n        activeTool={activeTool}\n        type={'Text'}\n      />\n      {textSizeSliderComponent}\n    </div>\n  );\n};\nRichTextStyleEditor.propTypes = propTypes;\n\nexport default React.memo(RichTextStyleEditor);\n","import RichTextStyleEditor from './RichTextStyleEditor';\n\nexport default RichTextStyleEditor;"],"sourceRoot":""}